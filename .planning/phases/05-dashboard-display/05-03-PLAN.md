---
phase: 05-dashboard-display
plan: 03
type: execute
wave: 3
depends_on: ["05-02"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "User can see 'Avg Run Duration' column in pipelines dashboard"
    - "Duration displays in readable format (hours, minutes, seconds)"
    - "Jobs without timing data show '-' character"
    - "Column sorts correctly when clicked"
    - "Field description explains the metric"
  artifacts: []
  key_links: []
---

<objective>
Verify the dashboard timing display works correctly in the live application through functional testing.

Purpose: Ensure the timing column displays correctly, handles NULL values gracefully, sorts properly, and provides value to users viewing job execution times.

Output: Confirmed working dashboard feature ready for production use.
</objective>

<execution_context>
@/Users/eric.r.driggs/.claude/get-shit-done/workflows/execute-plan.md
@/Users/eric.r.driggs/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@/Users/eric.r.driggs/github/ericdriggs/reportcard/.planning/PROJECT.md
@/Users/eric.r.driggs/github/ericdriggs/reportcard/.planning/phases/05-dashboard-display/05-CONTEXT.md

# Dependencies
@/Users/eric.r.driggs/github/ericdriggs/reportcard/.planning/phases/05-dashboard-display/05-01-PLAN.md
@/Users/eric.r.driggs/github/ericdriggs/reportcard/.planning/phases/05-dashboard-display/05-02-PLAN.md
</context>

<tasks>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Dashboard display with average run duration column showing wall clock execution time for jobs.

**Changes implemented:**
- TestResultGraph extended with startTime/endTime fields
- GraphService query includes timing columns from test_result table
- JobDashboardMetrics calculates avgRunDuration by aggregating test_result timing
- PipelineDashboardHtmlHelper renders "Avg Run Duration" column with formatted display
- NULL timing handled gracefully (displays "-")
- Duration formatted in human-readable XXh XXm XXs format with transparent padding for sorting
  </what-built>
  <how-to-verify>
**Prerequisites:**
1. Start local server:
   ```bash
   cd /Users/eric.r.driggs/github/ericdriggs/reportcard
   ./gradlew bootRun
   ```
   Wait for "Started ReportCardApp" message in console.

2. Ensure test data exists with Karate timing (from Phase 4.1):
   - If needed, upload test data with Karate JSON to populate timing
   - Or verify existing data has test_result.start_time/end_time populated

**Verification steps:**

1. **Navigate to pipelines dashboard**
   - Open browser to: `http://localhost:8080/company/{company}/org/{org}/pipelines`
   - Replace {company} and {org} with values from your test data
   - Example: `http://localhost:8080/company/acme/org/engineering/pipelines`

2. **Verify column presence**
   - [ ] Table has "Avg Run Duration" header
   - [ ] Column appears after "Test Pass %" column
   - [ ] Column appears before end of table

3. **Verify data display**
   - [ ] Jobs with timing data show formatted duration (e.g., "5m 30s", "1h 15m")
   - [ ] Jobs without timing data show "-" character
   - [ ] No blank cells or "null" text
   - [ ] Durations look reasonable (not "0s" for real jobs, not absurdly large)

4. **Verify formatting**
   - [ ] Duration uses hours/minutes/seconds format (not raw seconds)
   - [ ] Format is readable (e.g., "1h 05m", not "1:05" or "65m")
   - [ ] Consistent spacing and units across all rows

5. **Verify sorting**
   - [ ] Click "Avg Run Duration" column header
   - [ ] Jobs sort by duration (shortest to longest or vice versa)
   - [ ] Sorting is numerically correct (1m before 10m before 1h)
   - [ ] Jobs with "-" sort to top or bottom (not mixed in middle)
   - [ ] Click again to reverse sort order

6. **Verify field description**
   - [ ] Scroll to bottom of table
   - [ ] "Field Descriptions" section includes "Avg Run Duration"
   - [ ] Description explains the metric clearly
   - [ ] Description mentions wall clock time and aggregation

7. **Test with different filter conditions**
   - [ ] Apply filters using the form above the table
   - [ ] Filtered results still show Avg Run Duration column
   - [ ] Duration values update correctly for filtered subset

8. **Cross-browser check (optional but recommended)**
   - Test in Chrome/Firefox/Safari to ensure formatting displays consistently
   - Verify transparent padding (for sorting) doesn't create visible artifacts

**Expected outcomes:**
- Column displays correctly with readable durations
- NULL handling works (shows "-")
- Sorting works numerically
- Field description documents the metric
- No console errors in browser dev tools
- No visual layout issues

**If issues found:**
Document the specific issue:
- What URL you visited
- What you expected to see
- What you actually saw
- Browser console errors (if any)
- Screenshot if visual issue

Then respond with issue details for debugging.
  </how-to-verify>
  <resume-signal>
Type "approved" if verification successful, or describe specific issues found for investigation and fixes.
  </resume-signal>
</task>

</tasks>

<verification>
Human confirmation that dashboard displays timing correctly and provides value.
</verification>

<success_criteria>
- User confirms "Avg Run Duration" column visible in table
- User confirms duration formatting is readable
- User confirms NULL handling displays "-"
- User confirms column sorting works correctly
- User confirms field description is helpful
- No visual or functional issues reported
</success_criteria>

<output>
After approval, create `.planning/phases/05-dashboard-display/05-03-SUMMARY.md` documenting the verification results and any observations about the feature in production context.
</output>
