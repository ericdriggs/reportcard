= Build Acceptance Policy
:toc:

toc::[]

== Overview

=== Purpose
* Our goal is *not to test everything*, but to achieve *reasonable confidence* that the system's core paths work—without wasted effort.

=== What are Build Acceptance Tests?
* A fast, reliable test suite that checks whether a system's main functions work.

=== Why it matters
* Chronic red pipelines cultivate apathy—once failure becomes normal, teams stop reacting.

* Tests that take hours to run are more likely to boil the ocean than show whether the system actually works.

* Many regression suites have become too large, too slow, and too fragile to be useful.

* Build Acceptance keeps testing under control: small enough to stay green, fast enough to fix, and stable enough to matter.

=== Success Looks Like
- Fewer test failures, fixed quickly.
- Lower maintenance effort.
- Build Acceptance suite completes in about ten minutes.
- Teams respond quickly when failures occur.

== Definitions

=== Build Acceptance Test
A *Build Acceptance test suite*:

- Gives >80% confidence that core customer user journeys work correctly.
- Focuses on essential behaviors, not edge cases.
- Avoids duplication by adding only unique coverage.

== Phases

=== I - Build Acceptance Tests - Get To Green
*Healthy Build Acceptance Pipeline*

* A pipeline is *healthy* when *>95% of runs complete fully green.*

    ** The goal is to run the tests before deployment -- only reliable, healthy pipelines can be used for that.

* The goal is not merely fewer failures per run, but *more completely successful runs.*

*Rollout Steps*

- QA teams identify critical services needing Build Acceptance.
- For each:
** Mark minimal, high-value success-path tests as `@build_acceptance`.
** Create dedicated `build_acceptance` pipelines for only these tests.
- Tooling:
** Dashboards show % of runs with zero failures (by org/repo).
- Leadership:
** Review dashboards regularly to track health and decide readiness for gating.

=== II — Quality Gate & Deployment Enforcement
Once Build Acceptance pipelines are healthy:

- They become *deployment checks*.
- Nonproduction deploys go first to *canary locations*.
- Build Acceptance runs automatically before promotion.
- Failed Build Acceptance *blocks auto-deploy*, but can be manually overridden when justified.

=== III — Fast and Reliable Regression
- Use mocking or injected data to improve reliability.
- Remove redundant or low-value tests from regression suites once Build Acceptance is stable.


== Instrumentation & Dashboards
All Build Acceptance tests and pipelines must be tagged for visibility.

* `@build_acceptance` tag
* Pipeline name contains `build_acceptance`

Dashboards track:

- % of *fully passing pipeline runs*.
- *Runtime and flake* trends.
- *Per-team* and *org-wide* summaries.

Alerts trigger when pipelines stay red for extended periods.

== Roles & Responsibilities

[cols="1,3"]
|===
|Role |Responsibilities

|*Development Teams*
|Maintain services and infrastructure; fix build-breaking issues.

|*QA Teams*
|Keep Build Acceptance fast, accurate, and non-obstructive. Define qualifying tests and monitor reliability.

|*Leadership*
|Enforce creation and upkeep of Build Acceptance pipelines. Treat chronic red pipelines as problems, not background noise. Promote smaller, maintainable test suites.
|===

== Common Concerns (FAQ)

.*_Q: Won’t excluding tests reduce coverage?_*
A: No. Tests outside Build Acceptance still run as part of the broader regression suites.

.*_Q: What about regression tests?_*
A: They still matter—but belong in broader regression or exploratory suites, not in Build Acceptance. The goal is to *separate fast signal from deep validation.*

.*_Q: What if the environment is unstable?_*
A: Don't gate on it yet, but don't give up on it. Focus on monitoring and stabilizing. Build Acceptance becomes a deployment gate only when the underlying systems are consistent.

.*_Q: How do we measure success?_*
A: By *pipeline health over time*, not individual test pass rates. The metric is the percentage of runs that finish entirely green.

.*_Q: Why do I need Build acceptance tests? All my regression tests already pass all the time. If anything they are too fast and too reliable._*
A: Great! The next step is to help other teams get there so everybody wins.
