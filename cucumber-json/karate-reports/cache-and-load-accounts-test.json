[{"line":3,"elements":[{"start_timestamp":"2026-01-20T22:55:50.066Z","line":7,"name":"confirm that cache and load accounts works","description":"","id":"confirm-that-cache-and-load-accounts-works","type":"scenario","keyword":"Scenario","steps":[{"result":{"duration":409292,"status":"passed"},"comments":["# note keys under test must match refresh-and-load-cached-accounts.feature","# when we refresh and load the cache via setup.feature","# then the cache is as expected"],"line":13,"name":"match cachedAccounts['dev.premium_au_web'] != null","match":{"location":"karate","arguments":[]},"keyword":"*","doc_string":{"content_type":"","value":"14:55:53.208 << lock released, cached callSingle: classpath:init-lib.feature\n14:55:55.224 this thread waited 2001 milliseconds for callSingle lock: classpath:setup.feature\n","line":13}},{"name":"init-lib.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"","line":13},{"name":"def Aggregator = Java.type('collections.Aggregator')","result":{"duration":4642209,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":5,"doc_string":{"content_type":"","value":"14:55:50.099 karate.env system property was: null \n14:55:50.103 env: staging-cp3-us-east-1 \n14:55:50.105 >> lock acquired, begin callSingle: classpath:init-lib.feature\n","line":5}},{"name":"def CreateDisneyBuilderUtil = Java.type('com.hulu.sublife.dss.accounts.CreateDisneyBuilderUtil')","result":{"duration":855750,"status":"passed"},"match":{"location":"karate","arguments":[]},"comments":["#DSS"],"keyword":"> *","line":8},{"name":"def DssAccountClient = Java.type('com.hulu.sublife.dss.accounts.DssAccountClient')","result":{"duration":860792,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":9},{"name":"def DssAccountUtils = Java.type('com.hulu.sublife.dss.accounts.DssAccountUtils')","result":{"duration":469583,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":10},{"name":"def DssEnvironmentUtils = Java.type('com.hulu.sublife.dss.accounts.DssEnvironmentUtils')","result":{"duration":786667,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":11},{"name":"def KarateDssAccountClient = Java.type('com.hulu.sublife.dss.accounts.KarateDssAccountClient')","result":{"duration":1050875,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":12},{"name":"def DisneyEntitlementHelper = Java.type('disney.accounts.DisneyEntitlementHelper')","result":{"duration":1132291,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":13},{"name":"def DisneyOfferCache = Java.type('disney.offers.DisneyOfferCache')","result":{"duration":1002667,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":14},{"name":"def DisneySkuCache = Java.type('disney.offers.DisneySkuCache')","result":{"duration":643042,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":15},{"name":"def ContentProviderActivationDSSHelper = Java.type('services.content_provider_activation_dss.ContentProviderActivationDSSHelper')","result":{"duration":610667,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":16},{"name":"def ArrivalTimeKey = Java.type('com.disney.growthlife.aws.sqs.ArrivalTimeKey')","result":{"duration":513167,"status":"passed"},"match":{"location":"karate","arguments":[]},"comments":["#SQS"],"keyword":"> *","line":19},{"name":"def SqsClientPoller = Java.type('com.disney.growthlife.aws.sqs.SqsClientPoller')","result":{"duration":973166,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":20},{"name":"def TestingSqsClient = Java.type('com.disney.growthlife.aws.sqs.TestingSqsClient')","result":{"duration":902958,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":21},{"name":"call read('classpath:setup-util.feature')","result":{"duration":452057416,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":23},{"name":"setup-util.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">","line":23},{"name":"call read('classpath:shared\/assert-json-equals.feature')","result":{"duration":65818583,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":5},{"name":"shared\/assert-json-equals.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":5},{"name":"def assertJsonEquals =","result":{"duration":5257667,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":25,"doc_string":{"content_type":"","value":"function (req) {\n  var AssertJson = Java.type('com.hulu.sublife.util.AssertJson');\n  karate.log(\"expected: \" + req.expected + \", actual: \" + req.actual);\n  AssertJson.jsonUnitEquals(req);\n}","line":25}},{"name":"def jsonEquals = assertJsonEquals","result":{"duration":4188458,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":34},{"name":"def assertJsonEqualsStrict =","result":{"duration":1987125,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":36,"doc_string":{"content_type":"","value":"function (req) {\n  var AssertJson = Java.type('com.hulu.sublife.util.AssertJson');\n  karate.log(\"expected: \" + req.expected + \", actual: \" + req.actual);\n  AssertJson.jsonUnitEqualsStrict(req);\n}","line":36}},{"result":{"duration":515583,"status":"passed"},"comments":["####################################################################################################################","## same as assertJsonEquals, only strips time from iso8061 date strings in both expected and actual"],"line":48,"name":"def assertJsonEqualsStripTimes =","match":{"location":"karate","arguments":[]},"keyword":">>> *","doc_string":{"content_type":"","value":"function (req) {\n  var AssertJson = Java.type('com.hulu.sublife.util.AssertJson');\n  karate.log(\"expected: \" + req.expected + \", actual: \" + req.actual);\n  AssertJson.jsonUnitEqualsStripTimes(req);\n}","line":48}},{"result":{"duration":761375,"status":"passed"},"comments":["####################################################################################################################","# usage","#  * call assertJsonEqualsWithDateZone { expected: { date : \"date-offset-y:0,m:0,d:0\" }, actual: { date: #(AssertDate.now()) } }"],"line":61,"name":"def assertJsonEqualsWithDateOffset =","match":{"location":"karate","arguments":[]},"keyword":">>> *","doc_string":{"content_type":"","value":"function (req) {\n  var AssertJson = Java.type('com.hulu.sublife.util.AssertJson');\n  karate.log(\"expected: \" + req.expected + \", actual: \" + req.actual);\n  AssertJson.assertJsonEqualsWithDateOffset(req);\n}","line":61}},{"name":"def assertJsonEqualsWithDateZone = assertJsonEqualsWithDateOffset","result":{"duration":213417,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":69},{"name":"call read('classpath:shared\/basic-auth.feature')","result":{"duration":8929250,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":6},{"name":"shared\/basic-auth.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":6},{"name":"def basicAuth =","result":{"duration":1196333,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5,"doc_string":{"content_type":"","value":"function (username, password) {\n  var str = username + ':' + password;\n  var StandardCharsets = Java.type('java.nio.charset.StandardCharsets')\n  var Base64 = Java.type('java.util.Base64');\n  var encoder = Base64.getEncoder();\n  var bytes = str.toString().getBytes(StandardCharsets.UTF_8);\n  return 'Basic ' + encoder.encodeToString(bytes);\n}","line":5}},{"name":"call read('classpath:shared\/date.feature')","result":{"duration":21995500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":7},{"name":"shared\/date.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":7},{"result":{"duration":2434459,"status":"passed"},"comments":["#Deprecated: use AssertDate.now() or AssertDate.now(String zoneIdString)"],"line":9,"name":"def getNow =","match":{"location":"karate","arguments":[]},"keyword":">>> *","doc_string":{"content_type":"","value":"function () {\n    var d = new Date();\n    return d.toISOString();\n}","line":9}},{"result":{"duration":702583,"status":"passed"},"comments":["#Deprecated: use AssertDate.stripTimeFromDate() or AssertDate.stripTimeFromDates()"],"line":18,"name":"def stripTimeFromDate =","match":{"location":"karate","arguments":[]},"keyword":">>> *","doc_string":{"content_type":"","value":"function (dateString) {\n  return dateString.split('T')[0]\n}","line":18}},{"result":{"duration":1566000,"status":"passed"},"comments":["#Deprecated: use AssertDate.convertZone"],"line":26,"name":"def toUTC =","match":{"location":"karate","arguments":[]},"keyword":">>> *","doc_string":{"content_type":"","value":"function (dateString) {\n  var date = new Date(dateString);\n  return date.toISOString();\n}","line":26}},{"result":{"duration":582833,"status":"passed"},"comments":["#Deprecated: use AssertDate.getOffsetFromNow to support accurate timezone-based assertions"],"line":36,"name":"def getFutureDateInDays =","match":{"location":"karate","arguments":[]},"keyword":">>> *","doc_string":{"content_type":"","value":"function (x) {\n  var futureDate = new Date();\n  futureDate.setDate(futureDate.getDate() + x);\n  return futureDate.toISOString();\n}","line":36}},{"result":{"duration":654833,"status":"passed"},"comments":["#Deprecated: use AssertDate.getOffsetFromNow to support accurate timezone-based assertions"],"line":46,"name":"def getFutureDateInDaysWithoutSeconds =","match":{"location":"karate","arguments":[]},"keyword":">>> *","doc_string":{"content_type":"","value":"function (x) {\n  var futureDate = new Date();\n  futureDate.setDate(futureDate.getDate() + x);\n  return futureDate.toISOString().split('.')[0]+\"Z\";\n}","line":46}},{"result":{"duration":5012458,"status":"passed"},"comments":["#Deprecated: use AssertDate.getOffsetFromNow to support accurate timezone-based assertions"],"line":56,"name":"def setBirthDate =","match":{"location":"karate","arguments":[]},"keyword":">>> *","doc_string":{"content_type":"","value":"function (month, day, yearsInPast) {\n  var currentDate = getNow();\n  var newDate = new Date(currentDate);\n  newDate.setFullYear(newDate.getFullYear() - yearsInPast, 01, 01);\n  var month = (month < 10) ? ('0' + month) : month;\n  var days = (day < 10) ? ('0' + day) : day;\n  return newDate.getFullYear() + '-' + month + '-' + days;\n}","line":56}},{"result":{"duration":1072250,"status":"passed"},"comments":["#Deprecated: use AssertDate.getOffsetFromNow to support accurate timezone-based assertions"],"line":71,"name":"def dateInFuture =","match":{"location":"karate","arguments":[]},"keyword":">>> *","doc_string":{"content_type":"","value":"function(x) {\n  var futureDate = new Date();\n  futureDate.setDate(futureDate.getDate() + x);\n  return futureDate.toISOString();\n}","line":71}},{"name":"call read('classpath:shared\/encryption.feature')","result":{"duration":12073958,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":8},{"name":"shared\/encryption.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":8},{"name":"def encryptionUtil = Java.type('com.hulu.sublife.encryption.EncryptionUtil')","result":{"duration":1544333,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def jwtUtil = Java.type('com.hulu.sublife.encryption.JwtUtil')","result":{"duration":780709,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:shared\/feature-path.feature')","result":{"duration":9087959,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":9},{"name":"shared\/feature-path.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":9},{"name":"def getFeaturePath =","result":{"duration":586875,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5,"doc_string":{"content_type":"","value":"function() {\n  var KarateContext = Java.type('com.hulu.sublife.karate.KarateContext');\n  return KarateContext.getFeaturePath(karate);\n}","line":5}},{"name":"call read('classpath:shared\/get-var-use-default-if-undefined.feature')","result":{"duration":7780958,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":10},{"name":"shared\/get-var-use-default-if-undefined.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":10},{"result":{"duration":523084,"status":"passed"},"comments":["# if var is undefined, return defaultValue","# if var == null, return null","# if var != null return var"],"line":9,"name":"def getVarUseDefaultIfUndefined =","match":{"location":"karate","arguments":[]},"keyword":">>> *","doc_string":{"content_type":"","value":"function (variableName, defaultValue) {\n    var KarateContext = Java.type('com.hulu.sublife.karate.KarateContext')\n    return KarateContext.getVarUseDefaultIfUndefined(karate, variableName, defaultValue);\n}","line":9}},{"name":"call read('classpath:shared\/get-variable.feature')","result":{"duration":11604292,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":11},{"name":"shared\/get-variable.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":11},{"result":{"duration":1080459,"status":"passed"},"comments":["#\/**","#* Enhances karate.get by checking __gatling if unable to find in karate context","#* @param name : the name of the variable to get","#* @returns null if unable to find the variable in karate context or __gatling","#*\/"],"line":12,"name":"def getVariable =","match":{"location":"karate","arguments":[]},"keyword":">>> *","doc_string":{"content_type":"","value":"function (name) {\n    var KarateContext = Java.type('com.hulu.sublife.karate.KarateContext')\n    return KarateContext.getOrGatling(karate, name);\n}","line":12}},{"name":"call read('classpath:shared\/java-interop.feature')","result":{"duration":49438542,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":12},{"name":"shared\/java-interop.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":12},{"name":"def AssertDate = Java.type('com.hulu.sublife.util.AssertDate')","result":{"duration":1640416,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def AssertJson = Java.type('com.hulu.sublife.util.AssertJson')","result":{"duration":2359750,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"def BigInteger = Java.type(\"java.math.BigInteger\")","result":{"duration":840709,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":8},{"name":"def BigIntegerParser = Java.type('com.hulu.sublife.util.BigIntegerParser')","result":{"duration":684458,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":9},{"name":"def GrpcCallable = Java.type('com.hulu.sublife.grpc.GrpcCallable')","result":{"duration":734916,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":10},{"name":"def GrpcUtil = Java.type('com.hulu.sublife.grpc.GrpcUtil')","result":{"duration":668125,"status":"passed"},"match":{"location":"karate","arguments":[]},"comments":["#Deprecated -- prefer GrpcCallable"],"keyword":">>> *","line":12},{"name":"def KarateContext = Java.type('com.hulu.sublife.karate.KarateContext')","result":{"duration":452167,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":13},{"name":"def Log = Java.type('com.hulu.sublife.util.Log')","result":{"duration":353875,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":15},{"name":"def ProjectUtil = Java.type(\"com.hulu.sublife.util.ProjectUtil\")","result":{"duration":360000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":16},{"name":"def Random = Java.type('com.hulu.sublife.util.Random')","result":{"duration":332209,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":17},{"name":"def Regex = Java.type('com.hulu.sublife.util.Regex')","result":{"duration":334625,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":18},{"name":"def UrlUtil = Java.type('com.hulu.sublife.util.UrlUtil')","result":{"duration":861125,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":19},{"name":"def SystemUtil = Java.type('com.hulu.sublife.util.SystemUtil')","result":{"duration":841625,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":20},{"name":"def SsoNonProdCredentialsUtil = Java.type('com.hulu.sso.SsoNonProdCredentialsUtil')","result":{"duration":490916,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":21},{"name":"def PeriodCalculate = Java.type(\"disney.qe.util.time.PeriodCalculate\")","result":{"duration":506375,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":23},{"name":"def PeriodDuration = Java.type(\"org.threeten.extra.PeriodDuration\")","result":{"duration":550208,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":24},{"name":"def Instant = Java.type(\"java.time.Instant\")","result":{"duration":221042,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":25},{"name":"def TimeDifferenceAssert = Java.type(\"disney.qe.util.time.TimeDifferenceAssert\")","result":{"duration":869500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":26},{"name":"def TimeParseUtils = Java.type(\"disney.qe.util.time.TimeParseUtils\")","result":{"duration":543375,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":27},{"name":"call read('classpath:shared\/log.feature')","result":{"duration":18578000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":29},{"name":"shared\/log.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>>","line":29},{"name":"def logTrace =","result":{"duration":849875,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>>> *","line":6,"doc_string":{"content_type":"","value":"function(message) {\n  var Log = Java.type('com.hulu.sublife.util.Log');\n  Log.trace(message);\n}","line":6}},{"name":"def logInfo =","result":{"duration":330625,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>>> *","line":14,"doc_string":{"content_type":"","value":"function(message) {\n  var Log = Java.type('com.hulu.sublife.util.Log');\n  Log.info(message);\n}","line":14}},{"name":"def logDebug =","result":{"duration":444166,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>>> *","line":22,"doc_string":{"content_type":"","value":"function(message) {\n  var Log = Java.type('com.hulu.sublife.util.Log');\n  Log.debug(message);\n}","line":22}},{"name":"def logWarn =","result":{"duration":561458,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>>> *","line":30,"doc_string":{"content_type":"","value":"function(message) {\n  var Log = Java.type('com.hulu.sublife.util.Log');\n  Log.warn(message);\n}","line":30}},{"name":"def logError =","result":{"duration":617333,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>>> *","line":38,"doc_string":{"content_type":"","value":"function(message) {\n  var Log = Java.type('com.hulu.sublife.util.Log');\n  Log.error(message);\n}","line":38}},{"name":"call read('classpath:shared\/poll.feature')","result":{"duration":37668166,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":13},{"name":"shared\/poll.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":13},{"name":"def pollFeature =","result":{"duration":12783125,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":25,"doc_string":{"content_type":"","value":"function(featurePath, retryUntilFunction, args) {\n  if (!featurePath) {\n    throw(\"featurePath missing\");\n  }\n  if (!retryUntilFunction) {\n    throw(\"retryUntilFunction missing\");\n  }\n  if (!args) {\n    args = {};\n  }\n  var retryCount = karate.getEngine().getConfig().getRetryCount();\n  var retryInterval = karate.getEngine().getConfig().getRetryInterval();\n  for(i=1;i<=retryCount;i++) {\n    \/\/try-catch to handle timeout and other invoke errors\n    try {\n      var result = karate.call(featurePath, args);\n      \/\/store result in shared context\n      karate.set(result);\n      if(retryUntilFunction()) {\n        storeRequestResponse();\n        return;\n      }\n    } catch(err) {\n      karate.logger.warn(\"err: \" + err);\n    }\n    karate.logger.warn(\"poll failed i: \" + i\n        + \", featurePath: \" + featurePath\n        + \", retryUntilFunction: \" + retryUntilFunction\n        + \", retryCount: \" + retryCount\n        + \", retryInterval: \" + retryInterval\n    );\n    java.lang.Thread.sleep(retryInterval);\n  }\n  storeRequestResponse();\n  throw(\"retry timed out for featurePath: \" + featurePath\n        + \", retryUntilFunction: \" + retryUntilFunction\n        + \", retryCount: \" + retryCount\n        + \", retryInterval: \" + retryInterval\n        + \", responseStatus: \" + karate.get('responseStatus')\n        + \", responseBody: \" + JSON.stringify(karate.get('response'))\n      );\n}","line":25}},{"name":"def pollFunction =","result":{"duration":6354709,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":99,"doc_string":{"content_type":"","value":"function (feature, condition, timeout, args, sleepMillis) {\n  if (typeof sleepMillis == 'undefined' || sleepMillis == null) {\n    sleepMillis = 1000\n  }\n  var endTime = Number(new Date()) + timeout;\n  do {\n    sleep(sleepMillis);\n    var result = karate.call(feature, args);\n    var response = result.response;\n    if (condition(response)) {\n      return response;\n    }\n  } while (Number(new Date()) < endTime)\n  throw 'The condition was not met';\n}","line":99}},{"name":"call read('classpath:shared\/request-response.feature')","result":{"duration":17035542,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":14},{"name":"shared\/request-response.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":14},{"name":"def storeRequestResponse =","result":{"duration":6851792,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":11,"doc_string":{"content_type":"","value":"function () {\n  var p = {};\n  try {\n    if (karate.get('requestResponse') == null) {\n      karate.set('requestResponse', []);\n    }\n    var requestResponse = karate.get('requestResponse');\n    if (karate.get('requestResponseOptions') == null) {\n      karate.set('requestResponseOptions', { \"enabled\": false, \"body\": true, \"cookies\": true, \"headers\": true});\n    }\n    var opt = karate.get('requestResponseOptions');\n    karate.log('requestResponseOptions: ' + JSON.stringify(opt));\n    if (!opt.enabled) {\n      karate.log('requestResponse.enabled: false');\n      return;\n    }\n    {\n      var req = {};\n      { \/\/request\n        var r = karate.prevRequest;\n        if (r == null) {\n          karate.logger.warn(\"prevRequest is null\");\n        } else {\n          if (opt.body == true && r.body != null) {\n            req.body = new java.lang.String(r.body, 'utf-8');\n            try {\n              req.body = JSON.parse(req.body);\n            } catch(err) {\n              \/\/NO-OP -- request isn't in json format\n            }\n          }\n          if (opt.headers) {\n            req.headers = r.headers;\n          }\n          req.method = r.method;\n          req.url = r.url;\n          req.timeStamp = karate.get('requestTimeStamp');\n        }\n      }\n      p.request = req;\n      var resp = {};\n      { \/\/response\n        var responseBody = karate.get('response');\n        if (responseBody == null) {\n          return;\n        }\n        if (opt.body) {\n          resp.body = responseBody;\n        }\n        if (opt.cookies) {\n          resp.cookies = karate.get('responseCookies');\n        }\n        if (opt.headers) {\n          resp.headers = karate.get('responseHeaders');\n        }\n        resp.status = karate.get('responseStatus');\n        resp.millis = karate.get('responseTime');\n        resp.type = karate.get('responseType');\n      }\n      p.response = resp;\n    }\n    requestResponse.push(p);\n    karate.log(JSON.stringify(p));\n  } catch (err) {\n    karate.logger.error(\"storeRequestResponse failed, err.message: \" + err.message + \", element: \" + JSON.stringify(p));\n  }\n}","line":11}},{"name":"call read('classpath:shared\/random.feature')","result":{"duration":56051291,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":15},{"name":"shared\/random.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":15},{"name":"def randomInt =","result":{"duration":3909458,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6,"doc_string":{"content_type":"","value":"function() {\n  var min = 1;\n  var max = 9 * (10**15);\n  return randomBigIntRange(min, max);\n}","line":6}},{"name":"def randomId =","result":{"duration":810334,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":17,"doc_string":{"content_type":"","value":"function() {\n   var entropyMax = 100000;\n   var entropy = BigInt(randomBigIntRange(1, entropyMax-1));\n   var nowMillis = BigInt(Date.now());\n   return entropy + nowMillis * BigInt(entropyMax);\n}","line":17}},{"name":"def randomBigIntRange =","result":{"duration":295666,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":27,"doc_string":{"content_type":"","value":"function(min, max) {\n  return BigInt(Math.floor(Math.random() * (max - min) ) + min);\n}","line":27}},{"name":"def jsRandomId = randomId","result":{"duration":307750,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":35},{"name":"def newGuidNoDash =","result":{"duration":32907084,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":38,"doc_string":{"content_type":"","value":"function () {\n  var guidWithDash = newUuid()\n  var guid = guidWithDash.replaceAll(\/\\-\/g,\"\");\n  return guid;\n}","line":38}},{"name":"def newUuidNoDash = newGuidNoDash","result":{"duration":116042,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":47},{"name":"def newUuid =","result":{"duration":3428333,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":49,"doc_string":{"content_type":"","value":"function UUID() {\n    var rand = Math.random;\n    var nbr, randStr = \"\";\n    do {\n        randStr += (nbr = rand()).toString(16).substr(3, 6);\n    } while (randStr.length < 30);\n    return (\n        randStr.substr(0, 8) + \"-\" +\n        randStr.substr(8, 4) + \"-4\" +\n        randStr.substr(12, 3) + \"-\" +\n        ((nbr*4|0)+8).toString(16) + \/\/ [89ab]\n        randStr.substr(15, 3) + \"-\" +\n        randStr.substr(18, 12)\n    );\n}","line":49}},{"name":"def newGuid = newUuid","result":{"duration":87542,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":68},{"name":"def randomEmail =","result":{"duration":1265167,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":70,"doc_string":{"content_type":"","value":"function (prefix, suffix) {\n    if (suffix == null) {\n      suffix = \"@huluqa.com\";\n    }\n    if (!prefix) {\n       return projectName + \".\" + randomId() + suffix;\n    }\n    return prefix + \".\" + projectName + \".\" + randomId() + suffix;\n}","line":70}},{"name":"call read('classpath:shared\/sleep.feature')","result":{"duration":10976000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":16},{"name":"shared\/sleep.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":16},{"name":"def sleep =","result":{"duration":836375,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5,"doc_string":{"content_type":"","value":"function (pause){\n  var Thread = Java.type('java.lang.Thread');\n  karate.log('\\nsleeping for: ' + pause + ' ms\\n')\n  Thread.sleep(pause);\n  return;\n}","line":5}},{"name":"call read('classpath:shared\/truncate.feature')","result":{"duration":15034250,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":17},{"name":"shared\/truncate.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":17},{"name":"def truncateString =","result":{"duration":2330000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7,"doc_string":{"content_type":"","value":"function truncateString(string, limit) {\n  if (string.length > limit) {\n    return string.substring(0, limit);\n  } else {\n    return string;\n  }\n}","line":7}},{"name":"call read('classpath:shared\/url-util.feature')","result":{"duration":10298750,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":18},{"name":"shared\/url-util.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":18},{"name":"def addPaths =","result":{"duration":863375,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6,"doc_string":{"content_type":"","value":"function(baseUrl, ...relativePaths) {\n  var UrlUtil = Java.type('com.hulu.sublife.util.UrlUtil');\n  return UrlUtil.addPaths(baseUrl, relativePaths);\n}","line":6}},{"name":"def removeTrailingSlash =","result":{"duration":355208,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":14,"doc_string":{"content_type":"","value":"function(str) {\n  var UrlUtil = Java.type('com.hulu.sublife.util.UrlUtil');\n  return UrlUtil.removeTrailingSlash(str);\n}","line":14}},{"name":"call read('classpath:shared\/vault.feature')","result":{"duration":11794541,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":19},{"name":"shared\/vault.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":19},{"result":{"duration":973917,"status":"passed"},"comments":["#Returns a vault client for the provided prefix and non prod namespace"],"line":6,"name":"def getVaultNonProdClient =","match":{"location":"karate","arguments":[]},"keyword":">>> *","doc_string":{"content_type":"","value":"function(prefix, nonProdNameSpace) {\n var prodNameSpace = \" \";\n var NameSpaceVaultClient = Java.type('com.hulu.vault.NameSpaceVaultClient')\n try {\n   var nameSpaceVaultClient = new NameSpaceVaultClient(prefix, nonProdNameSpace, prodNameSpace)\n   return nameSpaceVaultClient.getNonProdInstance();\n } catch( ex ) {\n   ex.printStackTrace()\n   throw ex;\n }\n      }","line":6}},{"result":{"duration":264917,"status":"passed"},"comments":["#returns the map of values for the provided client and secret"],"line":22,"name":"def getVaultSecretMap =","match":{"location":"karate","arguments":[]},"keyword":">>> *","doc_string":{"content_type":"","value":"function(vaultClient, secret, key) {\n  return vaultClient.get(secret);\n}","line":22}},{"result":{"duration":271875,"status":"passed"},"comments":["#returns a single value for the provided client, secret and key"],"line":30,"name":"def getVaultSecretValue =","match":{"location":"karate","arguments":[]},"keyword":">>> *","doc_string":{"content_type":"","value":"function(vaultClient, secret, key) {\n  var secretMap = vaultClient.get(secret);\n  return secretMap.get(key);\n}","line":30}},{"name":"call read('classpath:services\/service-util.feature')","result":{"duration":15590083,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":21},{"name":"services\/service-util.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":21},{"result":{"duration":531083,"status":"passed"},"comments":["#Get basic auth from a json object using service.credentials.username, service.credentials.password"],"line":7,"name":"def getBasicAuth =","match":{"location":"karate","arguments":[]},"keyword":">>> *","doc_string":{"content_type":"","value":"function(service) {\n  var env = getEnv(service)\n  return basicAuth(service.credentials.username, service.credentials.password)\n}","line":7}},{"result":{"duration":617709,"status":"passed"},"comments":["#Get basic auth for a json object using","# service.credentials[localenv].username, service.credentials[localenv].password","#The value of localenv defaults to the env set in karate-config.js","# but can be overridden for testing using overrideEnv"],"line":19,"name":"def getEnvBasicAuth =","match":{"location":"karate","arguments":[]},"keyword":">>> *","doc_string":{"content_type":"","value":"function(service, overrideEnv) {\n  var localenv = getEnv(service, overrideEnv);\n  var envCreds = service.credentials[localenv];\n  if (envCreds == null) {\n    karate.logger.warn(\"service.credentials[localenv] == null, service.name: \" + service.name);\n    return basicAuth(\"\",\"\");\n  }\n  var username = service.credentials[localenv].username;\n  if (username == null) {\n    karate.logger.warn(\"service.credentials[localenv].username == null, service.name: \" + service.name);\n    return basicAuth(\"\",\"\");\n  }\n  var password = service.credentials[localenv].password;\n  if (password == null) {\n    karate.logger.warn(\"service.credentials[localenv].password == null, service.name: \" + service.name);\n    return basicAuth(\"\",\"\");\n  }\n  return basicAuth(username,password)\n}","line":19}},{"result":{"duration":4135458,"status":"passed"},"comments":["#Gets the best match environment for a given service json object containing a host property","#Supports sub-environments with fallbacks, e.g. dev-foo-bar will try to match in the following precedence","#  1. host.dev-foo-bar","#  2. host.dev-foo","#  3. host.dev","# Sub-environments allows overriding the url for a particular service under test while retaining the urls for other related services in the same environment","# Use candidates for sub-environments include, but are not limited to testing feature branches and release candidates"],"line":54,"name":"def getEnv =","match":{"location":"karate","arguments":[]},"keyword":">>> *","doc_string":{"content_type":"","value":"function(service, overrideEnv) {\n  var localenv = env\n  if ( typeof overrideEnv != 'undefined' ) {\n    karate.logger.trace('getEnv overrideEnv: ' + overrideEnv)\n    if (localenv != overrideEnv) {\n      karate.logger.trace(\"overriding env to: \" + overrideEnv + \", service.name: \" + service.name);\n      localenv = overrideEnv\n    }\n  }\n  if (service.host[localenv]) {\n    return localenv;\n  }\n  else {\n    var envParts = localenv.split(\"-\");\n    for ( var envPartCount=(envParts.length - 1); envPartCount>=1; envPartCount--) {\n      var parentEnvParts = envParts.slice(0, envPartCount)\n      var envParent = parentEnvParts.join(\"-\")\n      if (service.host[envParent]) {\n        return envParent\n      }\n    }\n  }\n  var ret = (\"getEnv - could not find match for env: \" + env + \" in service.host for service.name: \" + service.name);\n  karate.logger.trace(ret);\n  return ret;\n}","line":54}},{"result":{"duration":742417,"status":"passed"},"comments":["#Gets the base url for the requested service, with support for sub-environments"],"line":90,"name":"def getBaseUrl =","match":{"location":"karate","arguments":[]},"keyword":">>> *","doc_string":{"content_type":"","value":"function(service, overrideEnv) {\n  if ( typeof overrideEnv != 'undefined') {\n    karate.logger.trace('getBaseUrl overrideEnv: ' + overrideEnv)\n  }\n  var env = getEnv(service, overrideEnv)\n  if (service.host[env]) {\n    return service.host[env];\n  }\n  var ret = (\"getBaseUrl - could not find \" + service.name + \".host[\" + env + \"]\");\n  karate.logger.trace(ret);\n  return ret;\n}","line":90}},{"name":"call read('classpath:services\/cp3-forward-service\/cp3-forward-service.feature')","result":{"duration":51328792,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":22},{"name":"services\/cp3-forward-service\/cp3-forward-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":22},{"name":"json cp3ForwardService = read('classpath:services\/cp3-forward-service\/cp3-forward-service.json');","result":{"duration":14544000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def cp3ForwardServiceBaseUrl = getBaseUrl(cp3ForwardService)","result":{"duration":27826375,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/datadog\/datadog.feature')","result":{"duration":13598875,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":23},{"name":"services\/datadog\/datadog.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":23},{"name":"def dataDogBaseUrl = \"https:\/\/disneystreaming.datadoghq.com\/\"","result":{"duration":314583,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":4},{"name":"def dataDogApiKey = \"f63ce2364fa80a2c2cd2abf355190a7b\"","result":{"duration":152375,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def getDataDogEnv =","result":{"duration":592166,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7,"doc_string":{"content_type":"","value":"function() {\n  var ExecutionContextUtil = Java.type(\"com.hulu.sublife.util.ExecutionContextUtil\");\n  var org = ExecutionContextUtil.getOrg();\n  var repo = ExecutionContextUtil.getRepo();\n  var env = karate.get(\"env\");\n  var yellowPagesServiceId = ExecutionContextUtil.getYellowPagesServiceId();\n  \/\/TODO: find env or system property for pipeline\n  var pipeline = karate.get(\"pipeline\");\n  var host = ExecutionContextUtil.getHost();\n  var envs = {};\n  if (org) {\n    envs.org = org;\n  }\n  if (repo) {\n    envs.repo = repo;\n  }\n  if (env) {\n   envs.env = env;\n  }\n  if (pipeline) {\n    envs.pipeline = pipeline;\n  }\n  if (host) {\n    envs.host = host;\n  }\n  if (yellowPagesServiceId) {\n    envs.yellowPagesServiceId = yellowPagesServiceId;\n  }\n  return envs;\n}","line":7}},{"name":"def getPassPercentResultTag =","result":{"duration":686416,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":45,"doc_string":{"content_type":"","value":"function( passPercent) {\n  \/\/validations\n  if (isNaN(passPercent)) {\n    throw 'passPercent NaN';\n  }\n  if (passPercent > 100) {\n    throw 'passPercent > 100';\n  }\n  if (passPercent < 100) {\n    return [ \"result:failed\" ];\n  } else {\n    return [ \"result:success\" ];\n  }\n}","line":45}},{"name":"def getDataDogTags =","result":{"duration":586167,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":64,"doc_string":{"content_type":"","value":"function( dataDogTags ) {\n  if (!dataDogTags) {\n    dataDogTags = [];\n  }\n  if (karate.get('org')) {\n    dataDogTags.push(\"org:\" + org);\n  }\n  if (karate.get('repo')) {\n    dataDogTags.push(\"repo:\" + repo);\n  }\n  if (karate.get('host')) {\n    dataDogTags.push(\"host:\" + host);\n  }\n  if (karate.get('env')) {\n    dataDogTags.push(\"env:\" + env);\n  }\n  if (karate.get('pipeline')) {\n    dataDogTags.push(\"pipeline:\" + pipeline);\n  }\n  if (karate.get('yellowPagesServiceId')) {\n    dataDogTags.push(\"yellowPagesServiceId:\" + yellowPagesServiceId);\n  }\n  return dataDogTags;\n}","line":64}},{"name":"call read('classpath:services\/sso\/sso.feature')","result":{"duration":8982416,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":24},{"name":"services\/sso\/sso.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":24},{"name":"def ssoBaseUrl = \"https:\/\/login.hulu.com\/\"","result":{"duration":332500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":4},{"name":"def projectName = ProjectUtil.getProjectName()","result":{"duration":1579209,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":26},{"name":"call read('classpath:shared\/model\/model-lib.feature')","result":{"duration":46878958,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":24},{"name":"shared\/model\/model-lib.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">","line":24},{"name":"json Annual = read('classpath:shared\/model\/annual.json')","result":{"duration":2392667,"status":"passed"},"match":{"location":"karate","arguments":[]},"comments":["# 1. We are going to continue using PascalCase for the name variables","# 2. For any new models we are going to use the plural versions if there is any existing model","# 3. We are going to use uppercase for all json keys","# 4. We should use the new model from our tests and once the old model is not used, delete it.","# More info https:\/\/wiki.hulu.com\/display\/CUS\/sublife-api-test-library+shared.model+proposal"],"keyword":">> *","line":12},{"name":"json Bundles = read('classpath:shared\/model\/bundles.json')","result":{"duration":2380834,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":13},{"name":"json Components = read('classpath:shared\/model\/components.json')","result":{"duration":1366458,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":14},{"name":"json ComponentStatus = read('classpath:shared\/model\/component-status.json')","result":{"duration":806875,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":15},{"name":"json ComponentStatuses = read('classpath:shared\/model\/component-statuses.json')","result":{"duration":475833,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":16},{"name":"json CustomerType = read('classpath:shared\/model\/customer-type.json')","result":{"duration":533292,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":17},{"name":"json CustomerTypes = read('classpath:shared\/model\/customer-types.json')","result":{"duration":1044875,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":18},{"name":"json Discounts = read('classpath:shared\/model\/discounts.json')","result":{"duration":3097333,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":19},{"name":"json GatewayTypeId = read('classpath:shared\/model\/gateway-type-id.json')","result":{"duration":644875,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":20},{"name":"json OtpPlans = read('classpath:shared\/model\/otp-plans.json')","result":{"duration":379375,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":21},{"name":"json Product = read('classpath:shared\/model\/product.json')","result":{"duration":250792,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":22},{"name":"json Program = read('classpath:shared\/model\/program.json')","result":{"duration":404042,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":23},{"name":"json Programs = read('classpath:shared\/model\/programs.json')","result":{"duration":352750,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":24},{"name":"json QACreditCards = read('classpath:shared\/model\/qa-credit-cards.json')","result":{"duration":406042,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":25},{"name":"json SponsorType = read('classpath:shared\/model\/sponsor-type.json')","result":{"duration":548917,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":26},{"name":"json SponsorTypeAcct = read('classpath:shared\/model\/sponsor-type-acct.json')","result":{"duration":282584,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":27},{"name":"json SubscriptionStatus = read('classpath:shared\/model\/subscription-status.json')","result":{"duration":286791,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":28},{"name":"json Skus = read('classpath:shared\/model\/skus.json')","result":{"duration":351708,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":29},{"name":"json StaticUsers = read('classpath:shared\/model\/static-users.json')","result":{"duration":577375,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":30},{"name":"json dssPayTokens = read('classpath:shared\/model\/dss-pay-token.json')","result":{"duration":679167,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":31},{"name":"json DssOffers = read('classpath:shared\/model\/dss.json')","result":{"duration":2042125,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":32},{"name":"json DSSOffers = read('classpath:shared\/model\/dss-offers.json')","result":{"duration":1518334,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":33},{"name":"json DSS_APAC_Offers = read('classpath:shared\/model\/dss-apac-offers.json')","result":{"duration":704500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":34},{"name":"json DSS_EMEA_Offers = read('classpath:shared\/model\/dss-emea-offers.json')","result":{"duration":1606250,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":35},{"name":"json GEO_DATA = read('classpath:shared\/model\/geo-data.json')","result":{"duration":2713333,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":36},{"name":"def getBundleForId =","result":{"duration":5088916,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":39,"doc_string":{"content_type":"","value":"function(bundleId) {\n  for (bundleIdx in Bundles) {\n    var bundle = Bundles[bundleIdx];\n    if (bundleId == bundle.id) {\n      return bundle;\n    }\n  }\n  var message = \"Could not find bundleId: \" + bundleId + \" in Bundles\";\n  karate.log(message);\n  throw message;\n}","line":39}},{"name":"def getPaidComponentsForBundle =","result":{"duration":762708,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":57,"doc_string":{"content_type":"","value":"function(bundle) {\n  karate.log('!!! bundle[\"componentIds\"]: ' + bundle[\"componentIds\"]);\n  if (bundle[\"componentIds\"] == null) {\n    throw \"Missing property componentIds for bundle: \" + bundle;\n  }\n  var componentIds = bundle[\"componentIds\"];\n  var components = [];\n  for (var i = 0; i < componentIds.length; i++) {\n    var componentId = componentIds[i];\n    var component = {};\n    component.id = componentId;\n    component.policyId = 1000;\n    components.push(component);\n  }\n  return components;\n}","line":57}},{"name":"def getPaidComponentsForBundleId =","result":{"duration":240375,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":81,"doc_string":{"content_type":"","value":"function (bundleId) {\n  var bundle = getBundleForId(bundleId);\n  return getPaidComponentsForBundle(bundle);\n}","line":81}},{"name":"call read('classpath:services\/service-util.feature')","result":{"duration":15129708,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":25},{"name":"services\/service-util.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">","line":25},{"result":{"duration":439667,"status":"passed"},"comments":["#Get basic auth from a json object using service.credentials.username, service.credentials.password"],"line":7,"name":"def getBasicAuth =","match":{"location":"karate","arguments":[]},"keyword":">> *","doc_string":{"content_type":"","value":"function(service) {\n  var env = getEnv(service)\n  return basicAuth(service.credentials.username, service.credentials.password)\n}","line":7}},{"result":{"duration":271292,"status":"passed"},"comments":["#Get basic auth for a json object using","# service.credentials[localenv].username, service.credentials[localenv].password","#The value of localenv defaults to the env set in karate-config.js","# but can be overridden for testing using overrideEnv"],"line":19,"name":"def getEnvBasicAuth =","match":{"location":"karate","arguments":[]},"keyword":">> *","doc_string":{"content_type":"","value":"function(service, overrideEnv) {\n  var localenv = getEnv(service, overrideEnv);\n  var envCreds = service.credentials[localenv];\n  if (envCreds == null) {\n    karate.logger.warn(\"service.credentials[localenv] == null, service.name: \" + service.name);\n    return basicAuth(\"\",\"\");\n  }\n  var username = service.credentials[localenv].username;\n  if (username == null) {\n    karate.logger.warn(\"service.credentials[localenv].username == null, service.name: \" + service.name);\n    return basicAuth(\"\",\"\");\n  }\n  var password = service.credentials[localenv].password;\n  if (password == null) {\n    karate.logger.warn(\"service.credentials[localenv].password == null, service.name: \" + service.name);\n    return basicAuth(\"\",\"\");\n  }\n  return basicAuth(username,password)\n}","line":19}},{"result":{"duration":188625,"status":"passed"},"comments":["#Gets the best match environment for a given service json object containing a host property","#Supports sub-environments with fallbacks, e.g. dev-foo-bar will try to match in the following precedence","#  1. host.dev-foo-bar","#  2. host.dev-foo","#  3. host.dev","# Sub-environments allows overriding the url for a particular service under test while retaining the urls for other related services in the same environment","# Use candidates for sub-environments include, but are not limited to testing feature branches and release candidates"],"line":54,"name":"def getEnv =","match":{"location":"karate","arguments":[]},"keyword":">> *","doc_string":{"content_type":"","value":"function(service, overrideEnv) {\n  var localenv = env\n  if ( typeof overrideEnv != 'undefined' ) {\n    karate.logger.trace('getEnv overrideEnv: ' + overrideEnv)\n    if (localenv != overrideEnv) {\n      karate.logger.trace(\"overriding env to: \" + overrideEnv + \", service.name: \" + service.name);\n      localenv = overrideEnv\n    }\n  }\n  if (service.host[localenv]) {\n    return localenv;\n  }\n  else {\n    var envParts = localenv.split(\"-\");\n    for ( var envPartCount=(envParts.length - 1); envPartCount>=1; envPartCount--) {\n      var parentEnvParts = envParts.slice(0, envPartCount)\n      var envParent = parentEnvParts.join(\"-\")\n      if (service.host[envParent]) {\n        return envParent\n      }\n    }\n  }\n  var ret = (\"getEnv - could not find match for env: \" + env + \" in service.host for service.name: \" + service.name);\n  karate.logger.trace(ret);\n  return ret;\n}","line":54}},{"result":{"duration":117125,"status":"passed"},"comments":["#Gets the base url for the requested service, with support for sub-environments"],"line":90,"name":"def getBaseUrl =","match":{"location":"karate","arguments":[]},"keyword":">> *","doc_string":{"content_type":"","value":"function(service, overrideEnv) {\n  if ( typeof overrideEnv != 'undefined') {\n    karate.logger.trace('getBaseUrl overrideEnv: ' + overrideEnv)\n  }\n  var env = getEnv(service, overrideEnv)\n  if (service.host[env]) {\n    return service.host[env];\n  }\n  var ret = (\"getBaseUrl - could not find \" + service.name + \".host[\" + env + \"]\");\n  karate.logger.trace(ret);\n  return ret;\n}","line":90}},{"name":"call read('classpath:services\/services-lib.feature')","result":{"duration":2517282708,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":26},{"name":"services\/services-lib.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">","line":26},{"name":"call read('classpath:services\/accountmock\/accountmock.feature')","result":{"duration":18559459,"status":"passed"},"match":{"location":"karate","arguments":[]},"comments":["#Keep this list sorted alphabetically"],"keyword":">> *","line":7},{"name":"services\/accountmock\/accountmock.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":7},{"name":"json accountMock = read('classpath:services\/accountmock\/accountmock.json');","result":{"duration":1201375,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def accountMockBaseUrl = getBaseUrl(accountMock)","result":{"duration":1277875,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/babylon\/babylon.feature')","result":{"duration":71896167,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":8},{"name":"services\/babylon\/babylon.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":8},{"name":"json babylon = read('classpath:services\/babylon\/babylon.json');","result":{"duration":938792,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def babylonBaseUrl = getBaseUrl(babylon)","result":{"duration":1129500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def babylonAuth = getEnvBasicAuth(babylon)","result":{"duration":14242958,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"def babylonRetryDefault = { count: 6, interval: 5000 }","result":{"duration":121959,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":9},{"name":"json AccountingEventType = read('classpath:services\/babylon\/accounting-event-type.json');","result":{"duration":1299958,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":11},{"name":"def getAccountingEventName =","result":{"duration":757250,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":12,"doc_string":{"content_type":"","value":"function(id) {\n  for (prop in AccountingEventType) {\n    if (AccountingEventType[prop] == id) {\n      return prop;\n    }\n  }\n  return null;\n}","line":12}},{"name":"json BabylonTypeId = read('classpath:services\/babylon\/babylon-type-id.json');","result":{"duration":442667,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":24},{"name":"call read('classpath:services\/babylon\/get-subscription-payload.feature')","result":{"duration":18881333,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":26},{"name":"services\/babylon\/get-subscription-payload.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>>","line":26},{"name":"def getSubscriptionPayload =","result":{"duration":722958,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>>> *","line":5,"doc_string":{"content_type":"","value":"function(opt) {\n    var KeyGenerator = Java.type(\"babylon.HbaseKeyGenerator\")\n    if (karate.get('opt') == null) {\n        throw \"opt is required\"\n    }\n    if (opt.typeId == null) {\n        throw \"opt.typeId is required\"\n    }\n    if (opt.subscriberId == null) {\n        throw \"opt.subscriberId is required\"\n    }\n    if (opt.subscriptionId == null) {\n        throw \"opt.subscriptionId is required\"\n    }\n    var typeId = BigIntegerParser.parse(opt.typeId);\n    var subscriberId = BigIntegerParser.parse(opt.subscriberId);\n    var subscriptionId = BigIntegerParser.parse(opt.subscriptionId);\n    var key = KeyGenerator.karateKeyBigInteger(typeId, subscriberId, subscriptionId)\n    var column = opt.column || newUuidNoDash() + ''\n    var data = opt.data || randomId()\n    var value = '{\"\\subscriberId\\\":' + subscriberId +\n        ',\\\"subscriptionId\\\":' + subscriptionId +\n        ',\\\"data\\\":' + data +\n        '}';\n    return {\n        \"typeId\": typeId,\n        \"key\": key,\n        \"column\": column ,\n        \"value\": value\n    }\n}","line":5}},{"name":"call read('classpath:services\/babylon\/get-billing-payload.feature')","result":{"duration":14695875,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":27},{"name":"services\/babylon\/get-billing-payload.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>>","line":27},{"name":"def getBillingPayload =","result":{"duration":1007583,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>>> *","line":6,"doc_string":{"content_type":"","value":"function(opt) {\n    var KeyGenerator = Java.type(\"babylon.HbaseKeyGenerator\")\n    if (karate.get('opt') == null) {\n        throw \"opt is required\"\n    }\n    if (opt.typeId == null) {\n        throw \"opt.typeId is required\"\n    }\n    if (opt.userId == null) {\n        throw \"opt.userId is required\"\n    }\n    var typeId = BigIntegerParser.parse(opt.typeId);\n    var userId = BigIntegerParser.parse(opt.userId)\n    var key = KeyGenerator.karateKeyBigInteger(typeId, userId)\n    var column = opt.column || newUuidNoDash() + ''\n    var data = opt.data || randomId()\n    var value = '{\\\"userId\\\":' + userId +\n        ',\"\\data\\\":' + data +\n        '}';\n    return {\n        \"typeId\": typeId,\n        \"key\": key,\n        \"column\": column ,\n        \"value\": value\n    }\n}","line":6}},{"name":"def BabylonHelper = Java.type('services.babylon.BabylonHelper')","result":{"duration":850708,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":28},{"name":"def getLatestBabylonEvent =","result":{"duration":681000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":30,"doc_string":{"content_type":"","value":"function(events) {\n  var event = null;\n  var latestDate = Date.parse(events[0].createTime);\n  for (i in events) {\n    var currentDate = Date.parse(events[i].createTime);\n    if (currentDate >= latestDate) {\n        latestDate = currentDate;\n        event = events[i];\n    }\n  }\n  return event;\n}","line":30}},{"name":"call read('classpath:services\/backtothefuture\/backtothefuture.feature')","result":{"duration":11411417,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":9},{"name":"services\/backtothefuture\/backtothefuture.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":9},{"name":"json backToTheFuture = read('classpath:services\/backtothefuture\/backtothefuture.json');","result":{"duration":830500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def backToTheFutureBaseUrl = getBaseUrl(backToTheFuture)","result":{"duration":840458,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/ballyhoo\/ballyhoo.feature')","result":{"duration":17873417,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":10},{"name":"services\/ballyhoo\/ballyhoo.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":10},{"name":"json ballyhoo = read('classpath:services\/ballyhoo\/ballyhoo.json');","result":{"duration":730792,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def ballyhooBaseUrl = getBaseUrl(ballyhoo)","result":{"duration":3868875,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"def ballyhooAuth = call read('classpath:shared\/basic-auth.js') { username: 'username', password: 'password' }","result":{"duration":1261125,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":8},{"name":"def getBaseBundleByIdFromOffers =","result":{"duration":826375,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":10,"doc_string":{"content_type":"","value":"function(offers, id) {\n  var baseBundles = [];\n  var bundles = offers.base_bundles;\n  for (var i = 0; i < bundles.length; i++) {\n      if(bundles[i].id == id) {\n        baseBundles.push(bundles[i]);\n      }\n  }\n  return baseBundles;\n}","line":10}},{"name":"call read('classpath:services\/billing-scheduler\/billing-scheduler.feature')","result":{"duration":11748834,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":11},{"name":"services\/billing-scheduler\/billing-scheduler.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":11},{"name":"json billingScheduler = read('classpath:services\/billing-scheduler\/billing-scheduler.json');","result":{"duration":812458,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def billingSchedulerServiceUrl = getBaseUrl(billingScheduler)","result":{"duration":814875,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/bookkeeper\/bookkeeper.feature')","result":{"duration":13445542,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":12},{"name":"services\/bookkeeper\/bookkeeper.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":12},{"name":"json bookkeeper = read('classpath:services\/bookkeeper\/bookkeeper.json');","result":{"duration":770541,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def bookkeeperBaseUrl = getBaseUrl(bookkeeper)","result":{"duration":899709,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"def bookkeeperAuth = call read('classpath:shared\/basic-auth.js') { username: 'payment', password: 'Hulu12312' }","result":{"duration":621291,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":8},{"name":"def whitelistAuth = call read('classpath:shared\/basic-auth.js') { username: 'whitelist', password: 'test' }","result":{"duration":280000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":9},{"name":"call read('classpath:services\/bounty-service\/bounty-service.feature')","result":{"duration":13037500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":13},{"name":"services\/bounty-service\/bounty-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":13},{"name":"json bountyService = read('classpath:services\/bounty-service\/bounty-service.json')","result":{"duration":926417,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def bountyServiceUrl = getBaseUrl(bountyService)","result":{"duration":1145917,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def bountyServiceAuth = getBasicAuth(bountyService)","result":{"duration":1155083,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"call read('classpath:services\/braavos\/braavos.feature')","result":{"duration":17538875,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":14},{"name":"services\/braavos\/braavos.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":14},{"name":"json braavosConfig = read('classpath:services\/braavos\/braavos.json')","result":{"duration":965333,"status":"passed"},"match":{"location":"karate","arguments":[]},"comments":["# Load Braavos config"],"keyword":">>> *","line":7},{"name":"def braavosBaseUrl = getBaseUrl(braavosConfig)","result":{"duration":1198417,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":8},{"name":"def headersJson =","result":{"duration":72250,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":11,"doc_string":{"content_type":"","value":"{\n  'Content-Type': 'application\/json',\n  'Accept': 'application\/json'\n}","line":11}},{"name":"def requestParams =","result":{"duration":26125,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":19,"doc_string":{"content_type":"","value":"{}","line":19}},{"name":"def skipDecryption =","result":{"duration":860167,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":24,"doc_string":{"content_type":"","value":"function(isTestFlag, requestSource) {\n  return !isTestFlag || !requestSource.toLowerCase().includes('e2e')\n}","line":24}},{"name":"def awsRegion = braavosConfig.awsRegion[karate.get('env', 'staging')]","result":{"duration":2741125,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":31},{"name":"call read('classpath:services\/cardeau\/cardeau.feature')","result":{"duration":57409375,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":15},{"name":"services\/cardeau\/cardeau.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":15},{"name":"json cardeau = read('classpath:services\/cardeau\/cardeau.json');","result":{"duration":589583,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def cardeauBaseUrl = getBaseUrl(cardeau)","result":{"duration":961166,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def cardeauAuth = call read('classpath:shared\/basic-auth.js') { username: 'site', password: 'test1' }","result":{"duration":1050417,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"call read('classpath:services\/cardeau-v2\/cardeau-v2.feature')","result":{"duration":28294958,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":16},{"name":"services\/cardeau-v2\/cardeau-v2.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":16},{"name":"json cardeauV2 = read(\"classpath:services\/cardeau-v2\/cardeau-v2.json\");","result":{"duration":832458,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def cardeauV2BaseUrl = getBaseUrl(cardeauV2)","result":{"duration":1307500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def cardeauV2Auth = call read('classpath:shared\/basic-auth.js') { username: 'site', password: 'test1' }","result":{"duration":989584,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"def generateCardeauV2Headers =","result":{"duration":1461917,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":11,"doc_string":{"content_type":"","value":"function returnHeaders() {\n  let headersJson =     {\n    'Accept': 'application\/json; charset=UTF-8',\n    'X-BAMTech-Is-Test': karate.get('isTestFlag', true),\n    'Authorization': cardeauV2Auth\n  }\n  return headersJson\n}","line":11}},{"name":"call read('classpath:services\/chargeback-service\/chargeback-service.feature')","result":{"duration":15853209,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":17},{"name":"services\/chargeback-service\/chargeback-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":17},{"name":"json chargebackService = read('classpath:services\/chargeback-service\/chargeback-service.json');","result":{"duration":1117208,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def chargebackServiceBaseUrl = getBaseUrl(chargebackService)","result":{"duration":1286583,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"call read('classpath:services\/comcastMock\/comcastMock.feature')","result":{"duration":13634625,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":18},{"name":"services\/comcastMock\/comcastMock.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":18},{"name":"json comcastMock = read('classpath:services\/comcastMock\/comcastMock.json');","result":{"duration":764167,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def comcastBaseUrl = getBaseUrl(comcastMock)","result":{"duration":919541,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"call read('classpath:services\/core-messaging-email\/core-messaging-email.feature')","result":{"duration":10633792,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":19},{"name":"services\/core-messaging-email\/core-messaging-email.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":19},{"name":"json coreMessagingEmail = read('classpath:services\/core-messaging-email\/core-messaging-email.json');","result":{"duration":684083,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def coreMessagingEmailBaseUrl = getBaseUrl(coreMessagingEmail)","result":{"duration":617834,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"call read('classpath:services\/cortex\/cortex.feature')","result":{"duration":12097541,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":20},{"name":"services\/cortex\/cortex.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":20},{"name":"json cortex = read('classpath:services\/cortex\/cortex.json');","result":{"duration":1001667,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def cortexBaseUrl = getBaseUrl(cortex)","result":{"duration":1741833,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"call read('classpath:services\/cp1-forward-service\/cp1-forward-service.feature')","result":{"duration":16570875,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":21},{"name":"services\/cp1-forward-service\/cp1-forward-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":21},{"name":"json cp1ForwardService = read('classpath:services\/cp1-forward-service\/cp1-forward-service.json');","result":{"duration":1064416,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def getCp1ForwardServiceBaseUrl = function() { return getBaseUrl(cp1ForwardService) }","result":{"duration":443042,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"def cp1ForwardServiceAuth = getBasicAuth(cp1ForwardService)","result":{"duration":2027208,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":8},{"name":"call read('classpath:services\/credit-card-change\/credit-card-change.feature')","result":{"duration":16446625,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":22},{"name":"services\/credit-card-change\/credit-card-change.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":22},{"name":"json creditCardChangeJson = read('classpath:services\/credit-card-change\/credit-card-change.json');","result":{"duration":1034375,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def creditCardChangeBaseUrl = getBaseUrl(creditCardChangeJson)","result":{"duration":1697708,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def tutTokenHuluQa = \"Basic Y2NoYW5nZV9zdGFnaW5nOmZzeXE2cndlN0FqVmV1c0I=\"","result":{"duration":377208,"status":"passed"},"match":{"location":"karate","arguments":[]},"comments":["#FIXME: this should be a dynamic token -- not hard coded"],"keyword":">>> *","line":9},{"name":"call read('classpath:services\/credit-card-generate\/credit-card-generate.feature')","result":{"duration":10536167,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":23},{"name":"services\/credit-card-generate\/credit-card-generate.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":23},{"name":"json creditCardGenerateJson = read('classpath:services\/credit-card-generate\/credit-card-generate.json');","result":{"duration":602042,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def creditCardGenerateUrl = getBaseUrl(creditCardGenerateJson)","result":{"duration":573250,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/datos\/datos-hub\/datos-testing-service\/datos-testing-service.feature')","result":{"duration":9978667,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":24},{"name":"services\/datos\/datos-hub\/datos-testing-service\/datos-testing-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":24},{"name":"json datosTestSvc = read('classpath:services\/datos\/datos-hub\/datos-testing-service\/datos-testing-service.json');","result":{"duration":865000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def datosTestSvcBaseUrl = getBaseUrl(datosTestSvc)","result":{"duration":994791,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/delorean\/delorean.feature')","result":{"duration":16880250,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":25},{"name":"services\/delorean\/delorean.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":25},{"name":"json delorean = read('classpath:services\/delorean\/delorean.json');","result":{"duration":1060875,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def deloreanBaseUrl = getBaseUrl(delorean)","result":{"duration":541791,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def getDeloreanBaseUrl = function() { return getBaseUrl(delorean); }","result":{"duration":260167,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":8},{"name":"json countryCurrencyCodeMap = read('classpath:services\/delorean\/helpers\/country-currencycodes-map.json')","result":{"duration":540916,"status":"passed"},"match":{"location":"karate","arguments":[]},"comments":["# simplified references for Delorean offer filter creation"],"keyword":">>> *","line":11},{"name":"json packageIdMap = read('classpath:services\/delorean\/helpers\/package-ids-map.json')","result":{"duration":399667,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":12},{"name":"json paymentTypeMap = read('classpath:services\/delorean\/helpers\/payment-types-map.json')","result":{"duration":504917,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":13},{"result":{"duration":589833,"status":"passed"},"comments":["# utility methods for Delorean offer filter creation"],"line":16,"name":"def getDeloreanOffers =","match":{"location":"karate","arguments":[]},"keyword":">>> *","doc_string":{"content_type":"","value":"function () {\n    var offerCaches = karate.get('disneyOfferCaches');\n    if (offerCaches != null) {\n      offerCaches = JSON.stringify(offerCaches);\n    }\n    var skuCaches = karate.get('disneySkus');\n    if (skuCaches != null) {\n      skuCaches = JSON.stringify(skuCaches);\n    }\n    var offers = karate.get('offers');\n    if (offers != null) {\n      offers = JSON.stringify(offers);\n    }\n    var provider = karate.get('provider');\n    var KarateDeloreanOffers = Java.type(\"com.hulu.sublife.dss.accounts.KarateDeloreanOffers\");\n    var ret = KarateDeloreanOffers.builder()\n      .setSkuCachesJson(skuCaches)\n      .setOfferCachesJson(offerCaches)\n      .setProvider(provider)\n      .setDssOffersJson(offers).build();\n    return JSON.parse(ret.getOffersJson());\n}","line":16}},{"name":"def getDeloreanOfferFilters =","result":{"duration":482833,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":49,"doc_string":{"content_type":"","value":"function() {\n   if (karate.get('offerFilters') != null) {\n     return karate.get('offerFilters')\n   }\n   var brand = karate.get('brand', 'DISNEY');\n   var countryCode = karate.get('countryCode', 'US');\n   var currency = karate.get('currencyCode', countryCurrencyCodeMap[countryCode]);\n   var durationUnit = karate.get('durationUnit');\n   var phaseType = karate.get('phaseType');\n   var platform = karate.get('platform');\n   var offerFilters = {};\n   if (brand)        { offerFilters.brand = brand;   }\n   if (countryCode)  { offerFilters.countryCode = countryCode;   }\n   if (currency)     { offerFilters.currency = currency; }\n   if (durationUnit) { offerFilters.durationUnit = durationUnit; }\n   if (phaseType)    { offerFilters.phaseType = phaseType;       }\n   if (platform)     { offerFilters.platform = platform;         }\n   return offerFilters;\n}","line":49}},{"name":"call read('classpath:services\/device-register\/device-register.feature')","result":{"duration":12827625,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":26},{"name":"services\/device-register\/device-register.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":26},{"name":"json deviceRegister = read('classpath:services\/device-register\/device-register.json');","result":{"duration":867084,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def deviceRegisterBaseUrl = getBaseUrl(deviceRegister)","result":{"duration":949875,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/dorabella\/dorabella.feature')","result":{"duration":11591125,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":27},{"name":"services\/dorabella\/dorabella.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":27},{"name":"json dorabella = read('classpath:services\/dorabella\/dorabella.json');","result":{"duration":674416,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def dorabellaBaseUrl = getBaseUrl(dorabella)","result":{"duration":751542,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"def dorabellaAuth = basicAuth( dorabella.credentials.username, dorabella.credentials.password)","result":{"duration":461583,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":8},{"name":"def defaultRetryValidation =","result":{"duration":495166,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":10,"doc_string":{"content_type":"","value":"function() {\n  var expectedStatus = karate.get('expectedStatus', 200);\n  if(responseStatus != expectedStatus){\n    karate.log(\"Retrying because : \" + expectedStatus + \" != actual ResponseStatus: \" + responseStatus);\n    return false;\n  }\n  return true;\n}","line":10}},{"name":"call read('classpath:services\/dragoman\/dragoman.feature')","result":{"duration":13562292,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":28},{"name":"services\/dragoman\/dragoman.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":28},{"name":"json dragoman = read('classpath:services\/dragoman\/dragoman.json');","result":{"duration":889375,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def dragomanBaseUrl = getBaseUrl(dragoman)","result":{"duration":1012250,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"def dragomanAuth = basicAuth( dragoman.credentials.username, dragoman.credentials.password)","result":{"duration":454834,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":8},{"name":"call read('classpath:services\/dss-account-maker\/dss-account-maker.feature')","result":{"duration":13560292,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":29},{"name":"services\/dss-account-maker\/dss-account-maker.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":29},{"name":"json dssAccountMaker = read('classpath:services\/dss-account-maker\/dss-account-maker.json');","result":{"duration":791625,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def dssAccountMakerBaseUrl = getBaseUrl(dssAccountMaker)","result":{"duration":610291,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/dss-account-service\/dss-account-service.feature')","result":{"duration":14209958,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":30},{"name":"services\/dss-account-service\/dss-account-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":30},{"name":"json dssAccountServices = read('classpath:services\/dss-account-service\/dss-account-service.json');","result":{"duration":1099958,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def dssAccountServiceBaseUrl = getBaseUrl(dssAccountServices)","result":{"duration":594625,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/dss-activation-service\/dss-activation-service.feature')","result":{"duration":13292833,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":31},{"name":"services\/dss-activation-service\/dss-activation-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":31},{"name":"json dssActivationService = read('classpath:services\/dss-activation-service\/dss-activation-service.json');","result":{"duration":935792,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def dssActivationServiceBaseUrl = getBaseUrl(dssActivationService)","result":{"duration":1337542,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/dss-activation-eligibility-service\/dss-activation-eligibility-service.feature')","result":{"duration":11749625,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":32},{"name":"services\/dss-activation-eligibility-service\/dss-activation-eligibility-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":32},{"name":"json dssActivationEligibilityService = read('classpath:services\/dss-activation-eligibility-service\/dss-activation-eligibility-service.json');","result":{"duration":730708,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def dssActivationEligibilityServiceBaseUrl = getBaseUrl(dssActivationEligibilityService)","result":{"duration":582625,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/dss-activation-token-service\/dss-activation-token-service.feature')","result":{"duration":13152291,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":33},{"name":"services\/dss-activation-token-service\/dss-activation-token-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":33},{"name":"json dssActivationTokenService = read('classpath:services\/dss-activation-token-service\/dss-activation-token-service.json');","result":{"duration":875333,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def dssActivationTokenServiceBaseUrl = getBaseUrl(dssActivationTokenService)","result":{"duration":1234792,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/dss-api-key\/api-key.feature')","result":{"duration":11346334,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":34},{"name":"services\/dss-api-key\/api-key.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":34},{"name":"json apiKey = read('classpath:services\/dss-api-key\/api-key.json');","result":{"duration":861500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def apiKeyBaseUrl = getBaseUrl(apiKey)","result":{"duration":704000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"call read('classpath:services\/dss-dots\/dss-dots.feature')","result":{"duration":14778000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":35},{"name":"services\/dss-dots\/dss-dots.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":35},{"name":"json dssDots = read('classpath:services\/dss-dots\/dss-dots.json');","result":{"duration":1667375,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def dssDotsBaseUrl = getBaseUrl(dssDots)","result":{"duration":640250,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"call read('classpath:services\/dss-edge\/dss-edge.feature')","result":{"duration":11303416,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":36},{"name":"services\/dss-edge\/dss-edge.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":36},{"name":"json dssEdge = read('classpath:services\/dss-edge\/dss-edge.json');","result":{"duration":782416,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def dssEdgeBaseUrl = getBaseUrl(dssEdge)","result":{"duration":855459,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"call read('classpath:services\/dss-eligibility-service\/eligibility.feature')","result":{"duration":12492917,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":37},{"name":"services\/dss-eligibility-service\/eligibility.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":37},{"name":"json eligibilityService = read('classpath:services\/dss-eligibility-service\/eligibility.json');","result":{"duration":887916,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def eligibilityBaseUrl = getBaseUrl(eligibilityService)","result":{"duration":833708,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/dss-paywall\/paywall.feature')","result":{"duration":9292583,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":38},{"name":"services\/dss-paywall\/paywall.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":38},{"name":"json paywallService = read('classpath:services\/dss-paywall\/paywall.json');","result":{"duration":583917,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def paywallBaseUrl = getBaseUrl(paywallService)","result":{"duration":521500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/dss-idp-user-service\/dss-idp-user-service.feature')","result":{"duration":9746417,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":39},{"name":"services\/dss-idp-user-service\/dss-idp-user-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":39},{"name":"json dssIdpUserService = read('classpath:services\/dss-idp-user-service\/dss-idp-user-service.json');","result":{"duration":923000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def dssIdpUserServiceBaseUrl = getBaseUrl(dssIdpUserService)","result":{"duration":551208,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/dss-invoice-service\/dss-invoice-service.feature')","result":{"duration":13525834,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":40},{"name":"services\/dss-invoice-service\/dss-invoice-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":40},{"name":"json dssInvoice = read('classpath:services\/dss-invoice-service\/dss-invoice-service.json');","result":{"duration":950917,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def dssInvoiceBaseUrl = getBaseUrl(dssInvoice)","result":{"duration":694166,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"json INVOICE_CREATE_PAYLOAD = read('classpath:services\/dss-invoice-service\/payloads\/invoice-create.json')","result":{"duration":569000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"json INVOICE_PAID_PAYLOAD = read('classpath:services\/dss-invoice-service\/payloads\/invoice-paid.json')","result":{"duration":1105125,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":8},{"name":"json PROVIDE_TAX_PAYLOAD = read('classpath:services\/dss-invoice-service\/payloads\/provide-tax.json')","result":{"duration":583833,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":9},{"name":"json REFUND_PAYLOAD = read('classpath:services\/dss-invoice-service\/payloads\/refund-payload.json')","result":{"duration":261917,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":10},{"name":"call read('classpath:services\/dss-invoice-transaction-service\/dss-invoice-transaction-service.feature')","result":{"duration":10719917,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":41},{"name":"services\/dss-invoice-transaction-service\/dss-invoice-transaction-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":41},{"name":"json dssInvoiceTransaction = read('classpath:services\/dss-invoice-transaction-service\/dss-invoice-transaction-service.json');","result":{"duration":682375,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def dssInvoiceTransactionBaseUrl = getBaseUrl(dssInvoiceTransaction)","result":{"duration":523334,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"call read('classpath:services\/dss-redemption-service\/dss-redemption-service.feature')","result":{"duration":10918333,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":42},{"name":"services\/dss-redemption-service\/dss-redemption-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":42},{"name":"json dssRedemptionService = read('classpath:services\/dss-redemption-service\/dss-redemption-service.json');","result":{"duration":615209,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def dssRedemptionSvcBaseUrl = getBaseUrl(dssRedemptionService)","result":{"duration":603791,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"call read('classpath:services\/dss-subscription-service\/dss-subscription-service.feature')","result":{"duration":11728334,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":43},{"name":"services\/dss-subscription-service\/dss-subscription-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":43},{"name":"json dssSubscriptionServices = read('classpath:services\/dss-subscription-service\/dss-subscription-service.json');","result":{"duration":627750,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def dssSubscriptionServicesBaseUrl = getBaseUrl(dssSubscriptionServices)","result":{"duration":1271833,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"call read('classpath:services\/dss-token-tool\/dss-token-tool.feature')","result":{"duration":12798250,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":44},{"name":"services\/dss-token-tool\/dss-token-tool.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":44},{"name":"json dssTokenTool = read('classpath:services\/dss-token-tool\/dss-token-tool.json');","result":{"duration":725875,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def dssTokenToolBaseUrl = getBaseUrl(dssTokenTool)","result":{"duration":594458,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/dssoffers-service\/dssoffers-service.feature')","result":{"duration":15060583,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":45},{"name":"services\/dssoffers-service\/dssoffers-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":45},{"name":"json dssoffers = read('classpath:services\/dssoffers-service\/dssoffers-service.json');","result":{"duration":660416,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def dssoffersBaseUrl = getBaseUrl(dssoffers)","result":{"duration":638041,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"call read('classpath:services\/elmo\/elmo.feature')","result":{"duration":59733084,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":46},{"name":"services\/elmo\/elmo.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":46},{"name":"json elmo = read('classpath:services\/elmo\/elmo.json');","result":{"duration":2049417,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def elmoBaseUrl = getBaseUrl(elmo)","result":{"duration":2643708,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"def elmoAuth = call read('classpath:shared\/basic-auth.js') { username: 'payment', password: 'Hulu12312' }","result":{"duration":7459000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":8},{"name":"call read('classpath:services\/extlink-token-service\/extlink-token-service.feature')","result":{"duration":23204084,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":47},{"name":"services\/extlink-token-service\/extlink-token-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":47},{"name":"json extLinkTokenService = read('\/extlink-token-service\/extlink-token-service.json');","result":{"duration":1790458,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def extLinkTokenServiceBaseUrl = getBaseUrl(extLinkTokenService)","result":{"duration":1618375,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/flanders\/flanders.feature')","result":{"duration":13766541,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":48},{"name":"services\/flanders\/flanders.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":48},{"name":"json flanders = read('classpath:services\/flanders\/flanders.json');","result":{"duration":912958,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def flandersBaseUrl = getBaseUrl(flanders)","result":{"duration":914084,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"call read('classpath:services\/flex\/flex.feature')","result":{"duration":19933792,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":49},{"name":"services\/flex\/flex.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":49},{"name":"json flex = read('classpath:services\/flex\/flex.json');","result":{"duration":642500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def flexBaseUrl = getBaseUrl(flex)","result":{"duration":643000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def flexAuth = basicAuth( flex.credentials.username, flex.credentials.password)","result":{"duration":485041,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"call read('classpath:services\/flintan\/flintan.feature')","result":{"duration":11942834,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":50},{"name":"services\/flintan\/flintan.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":50},{"name":"json flintanJson = read('classpath:services\/flintan\/flintan.json');","result":{"duration":607166,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def flintanBaseUrl = getBaseUrl(flintanJson)","result":{"duration":491084,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def tutTokenFlintan =","result":{"duration":191250,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":8,"doc_string":{"content_type":"","value":"function () {\n    var TutTokenCache = Java.type('cache.TutTokenCache');\n    return \"Tut \" + TutTokenCache.getTutToken(\"Moes\", \"31fe81c6-88e9-442f-9d07-f5040dd5bf49\", \"SIGNED\");\n}","line":8}},{"name":"call read('classpath:services\/forward-service\/forward-service.feature')","result":{"duration":35957500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":51},{"name":"services\/forward-service\/forward-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":51},{"name":"call read('classpath:services\/cp1-forward-service\/cp1-forward-service.feature')","result":{"duration":20566833,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"services\/cp1-forward-service\/cp1-forward-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>>","line":7},{"name":"json cp1ForwardService = read('classpath:services\/cp1-forward-service\/cp1-forward-service.json');","result":{"duration":775833,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>>> *","line":6},{"name":"def getCp1ForwardServiceBaseUrl = function() { return getBaseUrl(cp1ForwardService) }","result":{"duration":271000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>>> *","line":7},{"name":"def cp1ForwardServiceAuth = getBasicAuth(cp1ForwardService)","result":{"duration":740458,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>>> *","line":8},{"name":"call read('classpath:services\/giraki\/giraki.feature')","result":{"duration":13257958,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":52},{"name":"services\/giraki\/giraki.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":52},{"name":"json giraki = read('classpath:services\/giraki\/giraki.json');","result":{"duration":833333,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def girakiBaseUrl = getBaseUrl(giraki)","result":{"duration":1051417,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def girakiAuth = basicAuth( giraki.credentials.username, giraki.credentials.password)","result":{"duration":809792,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"call read('classpath:services\/glo\/glo.feature')","result":{"duration":20153625,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":53},{"name":"services\/glo\/glo.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":53},{"name":"def Base64 = Java.type('java.util.Base64')","result":{"duration":415500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def listContains =","result":{"duration":193209,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7,"doc_string":{"content_type":"","value":"function (list, item) {\n  return list.includes(item)\n}","line":7}},{"name":"def updateTax =","result":{"duration":482667,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":14,"doc_string":{"content_type":"","value":"function (arg) {\n  for(var i=0; i < arg.length; i++){\n    arg[i].refundedTax = arg[i].calculatedTax\n    print(i, arg[i])\n  }\n  return arg\n}","line":14}},{"name":"def externalRefCountries = [\"AR\",\"BR\",\"CL\",\"CO\",\"MX\",\"TW\"]","result":{"duration":532917,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":25},{"name":"def USTerritoryZipCodes =","result":{"duration":74333,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":27,"doc_string":{"content_type":"","value":"{\n  \"AS\": \"96799\",\n  \"GU\": \"96910\",\n  \"MP\": \"96950\",\n  \"PR\": \"00901\",\n  \"US\": \"92704\",\n  \"VI\": \"00801\"\n}","line":27}},{"name":"def Statuses3DS2 = [\"SUCCESS\", \"CHALLENGE\", \"DECLINED\", \"ERROR\"]","result":{"duration":61500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":39},{"name":"def MagicValueMappingStatuses3DS2 =","result":{"duration":23875,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":41,"doc_string":{"content_type":"","value":"{\n  \"SUCCESS\": \"3DS_V2_FRICTIONLESS_IDENTIFIED\",\n  \"CHALLENGE\": \"3DS_V2_CHALLENGE_IDENTIFIED\",\n  \"DECLINED\": \"3DS_V2_FRICTIONLESS_REJECTED\",\n  \"ERROR\": \"3DS_V2_CHALLENGE_UNKNOWN_IDENTITY\"\n}","line":41}},{"name":"def ccPaymentMethodTokens =","result":{"duration":153291,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":51,"doc_string":{"content_type":"","value":"{\n  \"FR\": {\n    \"token\": \"1893f74f-5838-44c9-8a6b-61d196afe00b\",\n    \"firstSix\": \"481142\",\n    \"lastFour\": \"7811\",\n    \"paymentProvider\":\"Adyen\"\n  },\n  \"DE\": {\n    \"token\": \"462ca7cd-7bc6-44ed-b1bd-b61158d72776\",\n    \"firstSix\": \"455626\",\n    \"lastFour\": \"6199\",\n    \"paymentProvider\":\"Adyen\"\n  },\n  \"GB\": {\n    \"token\": \"0e5ecba8-1469-46c7-9736-db60a092e817\",\n    \"firstSix\": \"483192\",\n    \"lastFour\": \"8166\",\n    \"paymentProvider\":\"Adyen\"\n  },\n  \"IT\": {\n    \"token\": \"a588106e-1bbc-421d-9fb5-2c2061f1131e\",\n    \"firstSix\": \"400316\",\n    \"lastFour\": \"7738\",\n    \"cardBin\": \"400316\",\n    \"paymentProvider\":\"WorldPay\"\n  },\n  \"CH\": {\n    \"token\": \"9c0d2e8c-184d-4367-9407-4f15653d8161\",\n    \"firstSix\": \"379898\",\n    \"lastFour\": \"2723\",\n    \"brand\": \"MC\",\n    \"paymentProvider\":\"Adyen\"\n  },\n  \"ES\": {\n    \"token\": \"cf308ba8-56ac-4316-9627-5c6fa31cf0dc\",\n    \"firstSix\": \"478888\",\n    \"lastFour\": \"9303\",\n    \"paymentProvider\":\"Adyen\"\n  },\n  \"SE\": {\n    \"token\": \"2d10532b-2373-4e61-9bb6-93c24a9886a2\",\n    \"firstSix\": \"421199\",\n    \"lastFour\": \"5721\",\n    \"paymentProvider\":\"Adyen\"\n  },\n  \"NO\": {\n    \"token\": \"a8f21bad-7dfb-4a7b-acd0-2cb65a497989\",\n    \"firstSix\": \"430372\",\n    \"lastFour\": \"8638\",\n    \"paymentProvider\":\"Adyen\"\n  },\n  \"DK\": {\n    \"token\": \"0617c186-6e9d-4e48-8fb2-e90a9d34d5cf\",\n    \"firstSix\": \"443259\",\n    \"lastFour\": \"7927\",\n    \"paymentProvider\":\"Adyen\"\n  },\n  \"PL\": {\n    \"token\": \"483a86a3-fb01-449c-a859-9a9a63ec645f\",\n    \"firstSix\": \"510109\",\n    \"lastFour\": \"9465\",\n    \"brand\": \"MC\",\n    \"paymentProvider\":\"WorldPay\"\n  },\n  \"GL\": {\n    \"token\": \"1893f74f-5838-44c9-8a6b-61d196afe00b\",\n    \"firstSix\": \"481142\",\n    \"lastFour\": \"7811\",\n    \"paymentProvider\":\"Adyen\"\n  },\n  \"NL\": {\n    \"token\": \"6a3f33ab-3fe9-4a07-8e63-7b552668611a\",\n    \"firstSix\": \"455396\",\n    \"lastFour\": \"0379\",\n    \"paymentProvider\":\"WorldPay\"\n  },\n  \"TR\": {\n    \"token\": \"d446bbea-ca6c-41e1-bd4d-657259443994\",\n    \"firstSix\": \"510005\",\n    \"lastFour\": \"0976\",\n    \"paymentProvider\":\"WorldPay\"\n  },\n  \"BE\": {},\n  \"PT\": {},\n  \"IE\": {},\n  \"AU\": {},\n  \"FI\": {},\n  \"LU\": {},\n  \"GR\": {},\n  \"IL\": {},\n  \"IE\": {\n    \"token\": \"0e5ecba8-1469-46c7-9736-db60a092e817\",\n    \"firstSix\": \"403023\",\n    \"lastFour\": \"1099\",\n    \"paymentProvider\":\"WorldPay\"\n  },\n  \"JP\": {\n    \"token\": \"05507475-03fd-4885-a872-bad7301eadf1\",\n    \"firstSix\": \"352800\",\n    \"lastFour\": \"2791\",\n    \"paymentProvider\":\"Adyen\",\n    \"brand\": \"JCB\"\n  },\n  \"AT\": {\n    \"token\": \"cd62e3c7-13e5-4f92-95e3-8d46c18dc6a6\",\n    \"firstSix\": \"460306\",\n    \"lastFour\": \"1249\",\n    \"paymentProvider\":\"Adyen\"\n  }\n}","line":51}},{"name":"def defaultBillingAddress =","result":{"duration":29583,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":165,"doc_string":{"content_type":"","value":"{\n  \"country\": \"US\",\n  \"zipcode\": \"10001\",\n  \"city\": \"New York\",\n  \"state\":\"NY\"\n}","line":165}},{"name":"def rokuSIM =","result":{"duration":38208,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":175,"doc_string":{"content_type":"","value":"{\n  \"com.dss.payment.mock\": {\n    \"app\": {\n      \"rpm\": {\n        \"type\": \"billinginfo\",\n        \"status\": \"Success\",\n        \"httpStatus\": 200\n      }\n    }\n  }\n}","line":175}},{"name":"def rokuBRSIM =","result":{"duration":21625,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":190,"doc_string":{"content_type":"","value":"{\n  \"com.dss.payment.mock\": {\n    \"app\": {\n      \"rpm\": {\n        \"type\": \"billinginfo\",\n        \"status\": \"success\",\n        \"httpStatus\": 200,\n        \"includeCPF\": true\n      }\n    }\n  }\n}","line":190}},{"name":"def klarnaSIM =","result":{"duration":75791,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":206,"doc_string":{"content_type":"","value":"{\n  \"com.dss.payment.mock\": {\n    \"app\": {\n      \"kl\": {\n        \"type\": \"charge\",\n        \"status\": \"authorized\",\n        \"useMockForExternal\": false\n      }\n    },\n    \"http\": {\n      \"code\": 200\n    }\n  }\n}","line":206}},{"name":"def idealSIM =","result":{"duration":32458,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":224,"doc_string":{"content_type":"","value":"{\n  \"com.dss.payment.mock\": {\n    \"app\": {\n      \"id\": {\n        \"type\": \"charge\",\n        \"status\": \"authorized\",\n        \"useMockForExternal\": false\n      }\n    },\n    \"http\": {\n      \"code\": 200\n    }\n  }\n}","line":224}},{"name":"def signupFailSIM =","result":{"duration":22666,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":242,"doc_string":{"content_type":"","value":"{\n\"com.dss.payment.mock\": {\n  \"app\": {\n    \"adyen\": {\n      \"type\": {\n        \"schema\": \"amex\",\n        \"code\": 100\n      }\n    }\n  }\n},\n\"com.dss.payment.cards\": {\n  \"app\": {\n    \"routing\": {\n      \"provider\": \"ADYEN\"\n    }\n  }\n}\n}","line":242}},{"name":"def base64Encoder =","result":{"duration":176667,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":265,"doc_string":{"content_type":"","value":"function (str) {\n  return Base64.encoder.encodeToString(karate.toString(str).getBytes())\n}","line":265}},{"name":"def generateRandomIP =","result":{"duration":129917,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":272,"doc_string":{"content_type":"","value":"function(x) {\n  return (Math.floor(Math.random() * 255) + 1) + \".\" +\n         (Math.floor(Math.random() * 255)) + \".\" +\n         (Math.floor(Math.random() * 255)) + \".\" +\n         (Math.floor(Math.random() * 255));\n}","line":272}},{"name":"def assignOfferObject =","result":{"duration":654166,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":282,"doc_string":{"content_type":"","value":"function(partner, offer, delOffer, unit, country, offersArr, idCounter){\n  let offerObj = {};\n  let offerSKU = karate.jsonPath(delOffer,\"$.skus[?(@.country=='\"+country+\"' && @.platform=='WEB')]\")[0].skuName\n  offerObj[\"offer\"] = offer.presentation.name;\n  offerObj[\"id\"] = idCounter;\n  offerObj[\"sku\"] = offerSKU;\n  offerObj[\"country\"] = country\n  offerObj[\"partner\"] = partner\n  offerObj[\"Details\"] = {}\n  offerObj[\"Details\"][\"name\"] = delOffer.name\n  offerObj[\"Details\"][\"product\"] = offer.presentation.name\n  offerObj[\"Details\"][\"package_id\"] = delOffer.packageId\n  offerObj[\"Details\"][\"length\"] = delOffer.duration.length\n  offerObj[\"Details\"][\"unit\"] = unit\n  offerObj[\"Details\"][\"price\"] = offer.prices[0].amount\n  offerObj[\"Details\"][\"currency\"] = offer.prices[0].currency\n  offersArr.push(offerObj);\n}","line":282}},{"name":"def EMEACountries = [\"FR\",\"DE\",\"GB\",\"IT\",\"CH\",\"ES\",\"SE\",\"NO\",\"DK\",\"PL\",\"GL\",\"IT\",\"NL\", \"TR\", \"AT\", \"IE\"]","result":{"duration":61291,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":304},{"name":"def APACCountries = [\"KR\", \"JP\", \"HK\", \"SG\", \"TW\"]","result":{"duration":30667,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":305},{"name":"def LATAMCountries = [\"AR\", \"MX\", \"BR\", \"CL\", \"CO\", \"PE\", \"EC\", \"CR\", \"JM\"]","result":{"duration":34083,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":306},{"name":"def ANZCountries = [\"AU\", \"NZ\"]","result":{"duration":26917,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":307},{"name":"def usPackages = [\"disney_base\", \"disney_premium\", \"disney_trio_basic\", \"disney_trio_premium\", \"disney_duo_basic\", \"disney_duo_premium\", \"max_ads_bundle\", \"max_no_ads_bundle\"]","result":{"duration":16375,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":309},{"name":"def usESPNPackages = [\"disney_trio_premium\", \"disney_trio_basic\", \"espn_standalone\"]","result":{"duration":14708,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":310},{"name":"def tiaraPackages = [\"disney_base\", \"disney_standard\", \"non_us_disney_premium\"]","result":{"duration":14917,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":311},{"name":"def latamPackages = [\"non_us_disney_premium\", \"disney_standard\", \"latam_disney_premium\", \"star_standalone\"]","result":{"duration":15375,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":312},{"name":"def emeaPackages = [\"disney_base\", \"non_us_disney_premium\"]","result":{"duration":16334,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":313},{"name":"def partners = [\"DISNEY\", \"STAR\"]","result":{"duration":15292,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":314},{"name":"def regionMapper =","result":{"duration":573542,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":316,"doc_string":{"content_type":"","value":"{\n  \"EMEA\": #(EMEACountries),\n  \"APAC\": #(APACCountries),\n  \"LATAM\": #(LATAMCountries),\n  \"ANZ\": #(ANZCountries),\n}","line":316}},{"name":"def AddCC3DS2Currency = \"EUR\"","result":{"duration":112584,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":326},{"name":"def AddCC3DS2ExpiryYear = 2030","result":{"duration":345042,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":327},{"name":"def AddCC3DS2ExpiryMonth = 3","result":{"duration":190209,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":328},{"name":"def AddCC3DS2Bin = \"401005\"","result":{"duration":66000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":329},{"name":"def AddCC3DS2CVV = \"555\"","result":{"duration":52125,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":330},{"name":"def getISOformatFrequency =","result":{"duration":337417,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":332,"doc_string":{"content_type":"","value":"function(freq){\n  var isoFrequencyMap = { \"MONTHLY\":\"P1M\",\"YEARLY\":\"P1Y\",\"WEEKLY\":\"P1W\",\"QUARTERLY\":\"P3M\",\"SEMESTER\":\"P6M\",\"DAILY\":\"P1D\"}\n  if(Object.values(isoFrequencyMap).includes(freq)){\n     return freq\n  }\n  else{\n     return isoFrequencyMap[freq]\n  }\n}","line":332}},{"name":"def adyenSIM =","result":{"duration":88416,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":344,"doc_string":{"content_type":"","value":"{\n   \"com.dss.payment.cards\": {\n     \"app\": {\n       \"routing\": {\n         \"provider\": \"ADYEN\"\n       }\n     }\n   }\n}","line":344}},{"name":"def worldPlaySIM =","result":{"duration":28125,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":357,"doc_string":{"content_type":"","value":"{\n   \"com.dss.payment.cards\": {\n     \"app\": {\n       \"routing\": {\n         \"provider\": \"WORLDPAY\"\n       }\n     }\n   }\n}","line":357}},{"name":"def mercadoPagoSIM =","result":{"duration":30916,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":370,"doc_string":{"content_type":"","value":"{\n  \"com.dss.payment.mock\": {\n     \"app\": {\n          \"mp\": {\n             \"type\": \"charge\",\n             \"status\": \"authorized\"\n          }\n     },\n     \"http\": {\n       \"code\": 200\n     }\n  }\n}","line":370}},{"name":"def paymentFailureSIM =","result":{"duration":68291,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":386,"doc_string":{"content_type":"","value":"{\n  \"com.dss.payment.mock\": {\n     \"app\": {\n       \"adyen\": {\n           \"type\": {\n               \"schema\": \"amex\",\n               \"code\": 100\n           }\n       }\n     }\n  },\n  \"com.dss.payment.optimization\": {\n     \"app\": {\n        \"routing\": {\n           \"provider\": \"ADYEN\"\n        },\n        \"fallback\": {\n           \"provider\": \"NONE\"\n        }\n     }\n  }\n}","line":386}},{"name":"def lineItemsForInvoiceCreate =","result":{"duration":211625,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":413,"doc_string":{"content_type":"","value":"[\n  {\n    \"subscriptionId\": \"0\",\n    \"subscriptionType\": \"RECURRING\",\n    \"lineItemType\": \"PRODUCT_TYPE_STANDALONE\",\n    \"lineItemId\": \"2\",\n    \"optPurchaseId\": \"1\",\n    \"sponsorType\": \"UserPaid\",\n    \"promotionDetails\": {\n       \"productModelType\": \"UNIFIED_OFFERS\",\n       \"policyId\": \"1\",\n       \"bundleId\": \"2\",\n       \"discounts\": []\n    },\n   \"baseAmount\": 10,\n   \"total\": 10,\n   \"subTotal\": 0,\n   \"servicePeriod\": {\n     \"start\": \"2022-04-06T16:39:06.381Z\",\n     \"end\": \"2022-04-06T16:39:06.381Z\"\n   },\n   \"taxes\": [\n     {\n      \"jurisdiction\": \"CALIFORNIA\",\n      \"jurisdictionId\": \"string\",\n      \"jurisdictionLevel\": \"state\",\n      \"effectiveRate\": 0.1,\n      \"calculatedTax\": 1.0,\n      \"taxableAmount\": 9.0,\n      \"imposition\": \"VAT\",\n      \"isPaidByCustomer\": true\n     }\n   ],\n   \"billingCreditsApplied\": [\n     {\n       \"creditType\": \"INVOICE\",\n       \"amount\": 0,\n       \"invoiceId\": \"string\",\n       \"baseAmountCredit\": 0,\n       \"discountCredit\": 0\n     }\n   ],\n  \"billingCreditsGenerated\": [\n    {\n      \"creditType\": \"INVOICE\",\n      \"amount\": 0,\n      \"invoiceId\": \"string\",\n      \"baseAmountCredit\": 0,\n      \"discountCredit\": 0\n    }\n  ]\n }\n]","line":413}},{"name":"json glo = read('classpath:services\/glo\/glo.json');","result":{"duration":582167,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":473},{"name":"def gloBaseUrl = getBaseUrl(glo)","result":{"duration":865125,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":474},{"name":"call read('classpath:services\/growth-life-client-api\/growth-life-client-api.feature')","result":{"duration":20727541,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":54},{"name":"services\/growth-life-client-api\/growth-life-client-api.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":54},{"name":"json growthLifeClientApi = read('classpath:services\/growth-life-client-api\/growth-life-client-api.json');","result":{"duration":762125,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def growthLifeClientApiBaseUrl = getBaseUrl(growthLifeClientApi)","result":{"duration":566875,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def tiaraDogfoodingExpt =","result":{"duration":64917,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":8,"doc_string":{"content_type":"","value":"{\n  \"experiments\": {\n    \"cd04fe12&&SomeFeature\": {\n      \"variant_id\": \"TiaraCommerceDogfoodingExpt\",\n      \"version\": 1\n    },\n    \"f1daefb8&&SomeOtherFeature\": {\n      \"variant_id\": \"someVariant\",\n      \"version\": 1\n    }\n  }\n}","line":8}},{"name":"string tiaraDFEWpnxString = tiaraDogfoodingExpt","result":{"duration":254000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":23},{"name":"def Base64 = Java.type('java.util.Base64')","result":{"duration":355083,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":24},{"name":"def tiaraDFEWpnxHeader = Base64.getEncoder().encodeToString(tiaraDFEWpnxString.getBytes());","result":{"duration":544167,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":25},{"name":"print \"tiaraDogfoodingExpt: \", tiaraDogfoodingExpt","result":{"duration":1165083,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":26,"doc_string":{"content_type":"","value":"14:55:51.521 [print] tiaraDogfoodingExpt:  {\n  \"experiments\": {\n    \"cd04fe12&&SomeFeature\": {\n      \"variant_id\": \"TiaraCommerceDogfoodingExpt\",\n      \"version\": 1\n    },\n    \"f1daefb8&&SomeOtherFeature\": {\n      \"variant_id\": \"someVariant\",\n      \"version\": 1\n    }\n  }\n}\n \n","line":26}},{"name":"print \"tiaraDFEWpnxHeader: \", tiaraDFEWpnxHeader","result":{"duration":457875,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":27,"doc_string":{"content_type":"","value":"14:55:51.521 [print] tiaraDFEWpnxHeader:  eyJleHBlcmltZW50cyI6eyJjZDA0ZmUxMiYmU29tZUZlYXR1cmUiOnsidmFyaWFudF9pZCI6IlRpYXJhQ29tbWVyY2VEb2dmb29kaW5nRXhwdCIsInZlcnNpb24iOjF9LCJmMWRhZWZiOCYmU29tZU90aGVyRmVhdHVyZSI6eyJ2YXJpYW50X2lkIjoic29tZVZhcmlhbnQiLCJ2ZXJzaW9uIjoxfX19 \n","line":27}},{"name":"def paypayWpnxExpt =","result":{"duration":490125,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":29,"doc_string":{"content_type":"","value":"{\n\"experiments\": {\n  \"wpnx-APM-Japan-Paypay\": {\n    \"variant_id\": \"variant-paypay\",\n    \"version\": 1\n    }\n  }\n}","line":29}},{"name":"string paypayWpnxString = paypayWpnxExpt","result":{"duration":109458,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":40},{"name":"def paypayWpnxHeader = Base64.getEncoder().encodeToString(paypayWpnxString.getBytes());","result":{"duration":355792,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":41},{"name":"print \"paypayWpnxExpt: \", paypayWpnxExpt","result":{"duration":624000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":42,"doc_string":{"content_type":"","value":"14:55:51.523 [print] paypayWpnxExpt:  {\n  \"experiments\": {\n    \"wpnx-APM-Japan-Paypay\": {\n      \"variant_id\": \"variant-paypay\",\n      \"version\": 1\n    }\n  }\n}\n \n","line":42}},{"name":"print \"paypayWpnxHeader: \", paypayWpnxHeader","result":{"duration":414417,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":43,"doc_string":{"content_type":"","value":"14:55:51.524 [print] paypayWpnxHeader:  eyJleHBlcmltZW50cyI6eyJ3cG54LUFQTS1KYXBhbi1QYXlwYXkiOnsidmFyaWFudF9pZCI6InZhcmlhbnQtcGF5cGF5IiwidmVyc2lvbiI6MX19fQ== \n","line":43}},{"result":{"duration":592833,"status":"passed"},"comments":["# encode JSON blob to base64 string"],"line":46,"name":"def jsonToBase64String =","match":{"location":"karate","arguments":[]},"keyword":">>> *","doc_string":{"content_type":"","value":"function(jsonBlob) {\n  var StandardCharsets = Java.type('java.nio.charset.StandardCharsets');\n  var Base64 = Java.type('java.util.Base64');\n  var encoder = Base64.getEncoder();\n  var bytes = JSON.stringify(jsonBlob).getBytes(StandardCharsets.UTF_8);\n  return encoder.encodeToString(bytes);\n}","line":46}},{"name":"call read('classpath:services\/hawk\/hawk.feature')","result":{"duration":19199417,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":55},{"name":"services\/hawk\/hawk.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":55},{"name":"json hawk = read('classpath:services\/hawk\/hawk.json');","result":{"duration":723292,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def hawkBaseUrl = getBaseUrl(hawk)","result":{"duration":575750,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"def hawkAuth = basicAuth( hawk.credentials.username, hawk.credentials.password)","result":{"duration":491250,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":8},{"name":"call read('classpath:services\/highball\/highball.feature')","result":{"duration":18624250,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":56},{"name":"services\/highball\/highball.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":56},{"name":"json highBallApi = read('classpath:services\/highball\/highball-api.json');","result":{"duration":608875,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def highBallApiBaseUrl = getBaseUrl(highBallApi)","result":{"duration":976292,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/hookah\/hookah.feature')","result":{"duration":18502750,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":57},{"name":"services\/hookah\/hookah.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":57},{"name":"json hookah = read('classpath:services\/hookah\/hookah.json');","result":{"duration":634500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def hookahBaseUrl = getBaseUrl(hookah)","result":{"duration":605417,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def hookahAuth = basicAuth (hookah.credentials.username, hookah.credentials.password)","result":{"duration":554000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"call read('classpath:services\/hoth\/hoth.feature')","result":{"duration":14658500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":58},{"name":"services\/hoth\/hoth.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":58},{"name":"json hoth = read('classpath:services\/hoth\/hoth.json');","result":{"duration":545500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def hothBaseUrl = getBaseUrl(hoth)","result":{"duration":1391500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def hothAuth = basicAuth( hoth.credentials.username, hoth.credentials.password)","result":{"duration":654500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"call read('classpath:services\/icustomer\/icustomer.feature')","result":{"duration":18250708,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":59},{"name":"services\/icustomer\/icustomer.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":59},{"name":"json icustomer = read('classpath:services\/icustomer\/icustomer.json');","result":{"duration":582333,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def icustomerBaseUrl = getBaseUrl(icustomer)","result":{"duration":2952334,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def icustomerAuth = call read('classpath:shared\/basic-auth.js') { username: 'payment', password: 'Hulu12312' }","result":{"duration":616750,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"call read('classpath:services\/invite-service\/invite-service.feature')","result":{"duration":15806125,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":60},{"name":"services\/invite-service\/invite-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":60},{"name":"json inviteService = read('classpath:services\/invite-service\/invite-service.json');","result":{"duration":632459,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def inviteServiceBaseUrl = getBaseUrl(inviteService)","result":{"duration":537500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/invoice-service\/invoice-service.feature')","result":{"duration":17759459,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":61},{"name":"services\/invoice-service\/invoice-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":61},{"name":"json invoiceService = read('classpath:services\/invoice-service\/invoice-service.json');","result":{"duration":862583,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def invoiceServiceBaseUrl = getBaseUrl(invoiceService)","result":{"duration":1179584,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def invoiceServiceAuth = call read('classpath:shared\/basic-auth.js') { username: '#(invoiceService.credentials.username)', password: '#(invoiceService.credentials.password)' }","result":{"duration":2858458,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"def getLatestInvoice =","result":{"duration":604083,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":9,"doc_string":{"content_type":"","value":"function(events) {\n  var event = null;\n  var latestDate = Date.parse(events[0].completed);\n  for (i in events) {\n    var currentDate = Date.parse(events[i].completed);\n    if (currentDate >= latestDate) {\n        latestDate = currentDate;\n        event = events[i];\n    }\n  }\n  return event;\n}","line":9}},{"name":"call read('classpath:services\/instant-signup-service\/instant-signup-service.feature')","result":{"duration":13164208,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":62},{"name":"services\/instant-signup-service\/instant-signup-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":62},{"name":"json isuService = read('classpath:services\/instant-signup-service\/instant-signup-service.json');","result":{"duration":650000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def isuServiceBaseUrl = getBaseUrl(isuService)","result":{"duration":695709,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/itunes\/itunes.feature')","result":{"duration":11998583,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":63},{"name":"services\/itunes\/itunes.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":63},{"name":"json itunes = read('classpath:services\/itunes\/itunes.json');","result":{"duration":699708,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def itunesBaseUrl = getBaseUrl(itunes)","result":{"duration":592834,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/jackman\/jackman.feature')","result":{"duration":13326500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":64},{"name":"services\/jackman\/jackman.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":64},{"name":"json jackman = read('classpath:services\/jackman\/jackman.json');","result":{"duration":1053667,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def jackmanBaseUrl = getBaseUrl(jackman)","result":{"duration":845875,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def jackmanAuth = call read('classpath:shared\/basic-auth.js') { username: 'jackman', password: 'Hulu12312' }","result":{"duration":639125,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"call read('classpath:services\/jasper\/setup-jasper.feature')","result":{"duration":12603833,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":65},{"name":"services\/jasper\/setup-jasper.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":65},{"name":"json jasper = read('classpath:services\/jasper\/jasper.json');","result":{"duration":598541,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def jasperBaseUrl = getBaseUrl(jasper)","result":{"duration":562042,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def jasperAuth = call read('classpath:shared\/basic-auth.js') { username: 'jasper', password: 'jasper' }","result":{"duration":350542,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"call read('classpath:services\/jive\/setup-jive.feature')","result":{"duration":16306916,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":66},{"name":"services\/jive\/setup-jive.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":66},{"name":"json jive = read('classpath:services\/jive\/jive.json');","result":{"duration":956666,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def jiveBaseUrl = getBaseUrl(jive)","result":{"duration":810542,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def jiveAuth = call read('classpath:shared\/basic-auth.js') { username: 'jive-user', password: 'test2' }","result":{"duration":442208,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"def impactFalse = {impact:'false'}","result":{"duration":26333,"status":"passed"},"match":{"location":"karate","arguments":[]},"comments":["#TODO: deprecate, use defaults instead"],"keyword":">>> *","line":10},{"name":"def impactTrue = {impact:'true'}","result":{"duration":17333,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":11},{"name":"def noParams = {}","result":{"duration":16792,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":12},{"name":"call read('classpath:services\/kafka-msk\/setup-kafka-msk.feature')","result":{"duration":13208334,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":67},{"name":"services\/kafka-msk\/setup-kafka-msk.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":67},{"name":"json kafkaMSK = read('classpath:services\/kafka-msk\/kafka-msk.json');","result":{"duration":530375,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def kafkaMSKBaseUrl = getBaseUrl(kafkaMSK)","result":{"duration":640042,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/kafka-snoop\/kafka-snoop.feature')","result":{"duration":12775833,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":68},{"name":"services\/kafka-snoop\/kafka-snoop.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":68},{"name":"json kafkaSnoop = read('classpath:services\/kafka-snoop\/kafka-snoop.json');","result":{"duration":566667,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def kafkaSnoopBaseUrl = getBaseUrl(kafkaSnoop)","result":{"duration":447292,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def kafkaSnoopAuth = call read('classpath:shared\/basic-auth.js') { username: 'franz', password: 'ferdinand' }","result":{"duration":308000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"def getJsonPredicateKey =","result":{"duration":164833,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":9,"doc_string":{"content_type":"","value":"function(key) {\n  return \"[?(@.key == '\" + key + \"')]\"\n}","line":9}},{"name":"call read('classpath:services\/kinesis-snoop\/kinesis-snoop.feature')","result":{"duration":10817000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":69},{"name":"services\/kinesis-snoop\/kinesis-snoop.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":69},{"name":"json kinesisSnoop = read('classpath:services\/kinesis-snoop\/kinesis-snoop.json');","result":{"duration":544375,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def kinesisSnoopBaseUrl = getBaseUrl(kinesisSnoop)","result":{"duration":550625,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def kinesisSnoopAuth = call read('classpath:shared\/basic-auth.js') { username: 'franz', password: 'ferdinand' }","result":{"duration":339666,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"call read('classpath:services\/kardashian\/kardashian.feature')","result":{"duration":13618458,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":70},{"name":"services\/kardashian\/kardashian.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":70},{"name":"json kardashian = read('classpath:services\/kardashian\/kardashian.json');","result":{"duration":849292,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def kardashianBaseUrl = getBaseUrl(kardashian)","result":{"duration":1145042,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"call read('classpath:services\/launchdarkly\/launchdarkly.feature')","result":{"duration":14483875,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":71},{"name":"services\/launchdarkly\/launchdarkly.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":71},{"name":"json launchDarkly = read('classpath:services\/launchdarkly\/launchdarkly.json');","result":{"duration":627125,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def launchDarklyBaseUrl = getBaseUrl(launchDarkly)","result":{"duration":632000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/mandalorian\/mandalorian.feature')","result":{"duration":34466792,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":72},{"name":"services\/mandalorian\/mandalorian.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":72},{"name":"json mandalorian = read('classpath:services\/mandalorian\/mandalorian.json');","result":{"duration":498084,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def mandalorianBaseUrl = getBaseUrl(mandalorian)","result":{"duration":497792,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"def mandalorianAuth = call read('classpath:shared\/basic-auth.js') { username: 'username', password: 'password' }","result":{"duration":500583,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":8},{"name":"call read('classpath:services\/matt\/matt.feature')","result":{"duration":25949875,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":73},{"name":"services\/matt\/matt.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":73},{"name":"json matt = read('classpath:services\/matt\/matt.json');","result":{"duration":438875,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":8},{"name":"def mattBaseUrl = matt.host.dev","result":{"duration":117625,"status":"passed"},"match":{"location":"karate","arguments":[]},"comments":["#TODO: * def mattBaseUrl = getBaseUrl(matt)"],"keyword":">>> *","line":11},{"name":"def mattBaseUrl = matt.host.staging","result":{"duration":1468625,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":12},{"name":"def mattBaseUrl = (env == 'dev' ? matt.host.dev : mattBaseUrl)","result":{"duration":596167,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":13},{"name":"def mattBaseUrl = (env == 'staging' ? matt.host.staging : mattBaseUrl)","result":{"duration":159000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":14},{"name":"def mattBaseUrl = (env == 'staging-ava' ? matt.host.staging_ava : mattBaseUrl)","result":{"duration":151209,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":15},{"name":"def mattBaseUrl = (env == 'stagingHttps' ? matt.host.staging_https : mattBaseUrl)","result":{"duration":98208,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":16},{"name":"def mattAuth = call read('classpath:shared\/basic-auth.js') { username: '#(matt.credentials.username)', password: '#(matt.credentials.password)' }","result":{"duration":993916,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":17},{"name":"call read('classpath:services\/minuteswatchedmock\/setup-minuteswatchedmock.feature')","result":{"duration":25520541,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":74},{"name":"services\/minuteswatchedmock\/setup-minuteswatchedmock.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":74},{"name":"json minutesWatchedMock = read('classpath:services\/minuteswatchedmock\/minuteswatchedmock.json');","result":{"duration":637375,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def minutesWatchedMockBaseUrl = getBaseUrl(minutesWatchedMock)","result":{"duration":742958,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/moes\/moes.feature')","result":{"duration":12049583,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":75},{"name":"services\/moes\/moes.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":75},{"name":"json moes = read('classpath:services\/moes\/moes.json');","result":{"duration":753084,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def moesBaseUrl = getBaseUrl(moes)","result":{"duration":1144833,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/nook\/nook.feature')","result":{"duration":12145916,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":76},{"name":"services\/nook\/nook.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":76},{"name":"json nook = read('classpath:services\/nook\/nook.json')","result":{"duration":711208,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def nookBaseUrl = getBaseUrl(nook)","result":{"duration":465667,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def nookServiceTutToken =","result":{"duration":159458,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":8,"doc_string":{"content_type":"","value":"function () {\n    var TutTokenCache = Java.type('cache.TutTokenCache');\n    return \"Tut \" + TutTokenCache.getTutToken(\"sublife-api-test\", \"fcfb8bca-bd26-4305-af13-9234795719ee\", \"signed\");\n}","line":8}},{"name":"call read('classpath:services\/notification-service\/notification-service.feature')","result":{"duration":11387833,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":77},{"name":"services\/notification-service\/notification-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":77},{"name":"json notificationService = read('classpath:services\/notification-service\/notification-service.json');","result":{"duration":597375,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def notificationServiceBaseUrl = getBaseUrl(notificationService)","result":{"duration":493958,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/octopath\/octopath.feature')","result":{"duration":13773542,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":78},{"name":"services\/octopath\/octopath.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":78},{"name":"def isCp3 =","result":{"duration":251625,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5,"doc_string":{"content_type":"","value":"function() {\n  return env.startsWith('cp3');\n}","line":5}},{"name":"json octopath = read('classpath:services\/octopath\/octopath.json')","result":{"duration":389542,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":11},{"name":"def octopathBaseUrl = getBaseUrl(octopath)","result":{"duration":544167,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":12},{"name":"def headersData =","result":{"duration":38667,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":14,"doc_string":{"content_type":"","value":"{\n  Content-Type: 'application\/json;',\n  Accept: 'application\/json;'\n}","line":14}},{"name":"def octopathServiceTutToken =","result":{"duration":147917,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":22,"doc_string":{"content_type":"","value":"function () {\n    var TutTokenCache = Java.type('cache.TutTokenCache');\n    return \"Tut \" + TutTokenCache.getTutToken(\"sublife-api-test\", \"NeverNudgeNedsNose\", \"signed\");\n}","line":22}},{"name":"def defaultRetryValidation =","result":{"duration":314042,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":30,"doc_string":{"content_type":"","value":"function() {\n  var expectedStatus = karate.get('expectedStatus', 200);\n  if(responseStatus != expectedStatus){\n    karate.log(\"Retrying because : \" + expectedStatus + \" != actual ResponseStatus: \" + responseStatus);\n    return false;\n  }\n  return true;\n}","line":30}},{"name":"call read('classpath:services\/offer-service\/offer-service.feature')","result":{"duration":12020334,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":79},{"name":"services\/offer-service\/offer-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":79},{"name":"json offerService = read('classpath:services\/offer-service\/offer-service.json');","result":{"duration":745584,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def offerServiceUrl = getBaseUrl(offerService)","result":{"duration":545291,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/offer-service-grpc\/offer-service-grpc.feature')","result":{"duration":12906667,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":80},{"name":"services\/offer-service-grpc\/offer-service-grpc.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":80},{"name":"json offerServiceGRPCJson = read('classpath:services\/offer-service-grpc\/offer-service-grpc.json');","result":{"duration":581834,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def offerServiceGRPCBaseUrl = getBaseUrl(offerServiceGRPCJson)","result":{"duration":2214959,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/order-status\/order-status.feature')","result":{"duration":12425875,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":81},{"name":"services\/order-status\/order-status.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":81},{"name":"json orderStatus = read('classpath:services\/order-status\/order-status.json');","result":{"duration":785167,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def orderStatusBaseUrl = getBaseUrl(orderStatus)","result":{"duration":492291,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/order-submission\/order-submission.feature')","result":{"duration":11238958,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":82},{"name":"services\/order-submission\/order-submission.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":82},{"name":"json orderSubmission = read('classpath:services\/order-submission\/order-submission.json');","result":{"duration":542459,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def orderSubmissionBaseUrl = getBaseUrl(orderSubmission)","result":{"duration":514333,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/order-update\/order-update.feature')","result":{"duration":12914458,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":83},{"name":"services\/order-update\/order-update.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":83},{"name":"json orderUpdate = read('classpath:services\/order-update\/order-update.json');","result":{"duration":527292,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def orderUpdateBaseUrl = getBaseUrl(orderUpdate)","result":{"duration":917958,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/otp-service\/otp-service.feature')","result":{"duration":12140750,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":84},{"name":"services\/otp-service\/otp-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":84},{"name":"json otpservice = read('classpath:services\/otp-service\/otpservice.json');","result":{"duration":600916,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def otpServiceBaseUrl = getBaseUrl(otpservice)","result":{"duration":409583,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def otpServiceTutToken =","result":{"duration":141208,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":8,"doc_string":{"content_type":"","value":"function () {\n    var TutTokenCache = Java.type('cache.TutTokenCache');\n    return \"Tut \" + TutTokenCache.getTutToken(\"otp-test-client\", \"ccd2e92b-91a1-4f9e-8d66-c56dba907a55\", \"signed\");\n}","line":8}},{"name":"call read('classpath:services\/panda\/panda.feature')","result":{"duration":12943084,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":85},{"name":"services\/panda\/panda.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":85},{"name":"json panda = read('classpath:services\/panda\/panda.json');","result":{"duration":767209,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def pandaBaseUrl = getBaseUrl(panda)","result":{"duration":523459,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/partner-account-mapper\/partner-account-mapper.feature')","result":{"duration":13867250,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":86},{"name":"services\/partner-account-mapper\/partner-account-mapper.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":86},{"name":"json partnerAccountMapper = read('classpath:services\/partner-account-mapper\/partner-account-mapper.json');","result":{"duration":1848167,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def partnerAccountMapperBaseUrl = getBaseUrl(partnerAccountMapper)","result":{"duration":746750,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/partner-sku\/partner-sku.feature')","result":{"duration":14617958,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":87},{"name":"services\/partner-sku\/partner-sku.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":87},{"name":"json partnerSku = read('classpath:services\/partner-sku\/partner-sku.json');","result":{"duration":649958,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def partnerSkuBaseUrl = getBaseUrl(partnerSku)","result":{"duration":603667,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def partnerSkuBasicAuth = basicAuth(partnerSku.credentials.username, partnerSku.credentials.password)","result":{"duration":543666,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"call read('classpath:services\/partnerdummysub\/partnerdummysub.feature')","result":{"duration":33664875,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":88},{"name":"services\/partnerdummysub\/partnerdummysub.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":88},{"name":"json partnerDummySub = read('classpath:services\/partnerdummysub\/partnerdummysub.json');","result":{"duration":4059209,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def partnerDummySubBaseUrl = getBaseUrl(partnerDummySub)","result":{"duration":4123084,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"def partnerDummySubAuth = call read('classpath:shared\/basic-auth.js') { username: 'partnerships', password: 'Hulu12312' }","result":{"duration":1590125,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":8},{"name":"call read('classpath:services\/payments-gateway\/payments-gateway.feature')","result":{"duration":24866584,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":89},{"name":"services\/payments-gateway\/payments-gateway.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":89},{"name":"json paymentsGateway = read('classpath:services\/payments-gateway\/payments-gateway.json');","result":{"duration":2059542,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def paymentsGatewayBaseUrl = getBaseUrl(paymentsGateway)","result":{"duration":692750,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"def paymentsGatewayAuth = call read('classpath:shared\/basic-auth.js') { username: 'payment', password: 'Hulu12312' }","result":{"duration":562459,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":8},{"name":"def whitelistAuth = call read('classpath:shared\/basic-auth.js') { username: 'whitelist', password: 'test' }","result":{"duration":578208,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":9},{"name":"call read('classpath:services\/payment-gateway-upv2\/payment-gateway.feature')","result":{"duration":69996084,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":90},{"name":"services\/payment-gateway-upv2\/payment-gateway.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":90},{"name":"json paymentGatewayJson = read('classpath:services\/payment-gateway-upv2\/payment-gateway.json');","result":{"duration":4342500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def paymentGatewayBaseUrl = getBaseUrl(paymentGatewayJson)","result":{"duration":24117750,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/pong\/pong.feature')","result":{"duration":21385250,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":91},{"name":"services\/pong\/pong.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":91},{"name":"json pong = read('classpath:services\/pong\/pong.json');","result":{"duration":2845916,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def pongBaseUrl = getBaseUrl(pong)","result":{"duration":792792,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def pongTutToken =","result":{"duration":392917,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":8,"doc_string":{"content_type":"","value":"function () {\n    var TutTokenCache = Java.type('cache.TutTokenCache');\n    return \"Tut \" + TutTokenCache.getTutToken(\"pong-client\", \"3a719ddd-d9a1-4699-b3a9-fb9b21afb887\", \"SIGNED\");\n}","line":8}},{"name":"call read('classpath:services\/price-engine-service\/price-engine-service.feature')","result":{"duration":22734125,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":92},{"name":"services\/price-engine-service\/price-engine-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":92},{"name":"json priceEngineService = read('classpath:services\/price-engine-service\/price-engine-service.json');","result":{"duration":907875,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def priceEngineServiceUrl = getBaseUrl(priceEngineService)","result":{"duration":1066208,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def defaultRetryValidation =","result":{"duration":1818584,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":8,"doc_string":{"content_type":"","value":"function() {\n  var expectedStatus = karate.get('expectedStatus', 200);\n  if(responseStatus != expectedStatus){\n    karate.log(\"Retrying because : \" + expectedStatus + \" != actual ResponseStatus: \" + responseStatus);\n    return false;\n  }\n  return true;\n}","line":8}},{"name":"call read('classpath:services\/product-offering\/product-offering.feature')","result":{"duration":16924833,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":93},{"name":"services\/product-offering\/product-offering.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":93},{"name":"json productOffering = read('classpath:services\/product-offering\/product-offering.json');","result":{"duration":1885458,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def productOfferingBaseUrl = getBaseUrl(productOffering)","result":{"duration":775167,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/recognito\/recognito.feature')","result":{"duration":13302958,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":94},{"name":"services\/recognito\/recognito.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":94},{"name":"def recognitoBaseUrl = \"https:\/\/cognito-idp.<awsRegion>.amazonaws.com\"","result":{"duration":243375,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"call read('classpath:services\/redemption-service\/redemption-service.feature')","result":{"duration":18460375,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":95},{"name":"services\/redemption-service\/redemption-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":95},{"name":"json redemptionService = read('classpath:services\/redemption-service\/redemption-service.json');","result":{"duration":728375,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def redemptionServiceBaseUrl = getBaseUrl(redemptionService)","result":{"duration":650750,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def redeemUsername = 'redemption-' + env + '-user'","result":{"duration":96916,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":8},{"name":"def redeemPassword = 'redemption-' + env + '-pass'","result":{"duration":48542,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":9},{"name":"def redemptionServiceAuth = getEnvBasicAuth(redemptionService)","result":{"duration":1272083,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":11,"doc_string":{"content_type":"","value":"14:55:52.252 service.credentials[localenv] == null, service.name: redemption-service \n","line":11}},{"name":"def promotionVariableFunction =","result":{"duration":1656833,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":13,"doc_string":{"content_type":"","value":"function(promotionType, promotionValue) {\n  var result = \"\";\n  if (promotionType != null && promotionValue != null) {\n    result += \"?promotionType=\" + promotionType + \"&promotionValue=\" + promotionValue;\n  } else if (promotionValue != null) {\n    result += \"?promotionValue=\" + promotionValue;\n  } else if (promotionType != null) {\n    result += \"?promotionType=\" + promotionType;\n  }\n  return result;\n}","line":13}},{"name":"call read('classpath:services\/redemption-without-payment\/redemption-without-payment.feature')","result":{"duration":11811167,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":96},{"name":"services\/redemption-without-payment\/redemption-without-payment.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":96},{"name":"json rwopService = read('classpath:services\/redemption-without-payment\/redemption-without-payment.json');","result":{"duration":500250,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def rwopServiceBaseUrl = getBaseUrl(rwopService)","result":{"duration":374166,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/refund-service\/refund-service.feature')","result":{"duration":16041958,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":97},{"name":"services\/refund-service\/refund-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":97},{"name":"json refundService = read('classpath:services\/refund-service\/refund-service.json');","result":{"duration":906208,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def refundServiceBaseUrl = getBaseUrl(refundService)","result":{"duration":1412250,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def validateInvoicev2Taxed =","result":{"duration":569958,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":8,"doc_string":{"content_type":"","value":"function() {\n  var flag = false\n  if(response.invoiceType == \"billed-with-tax\"){\n    return true;\n  }\n  return flag\n}","line":8}},{"result":{"duration":927792,"status":"passed"},"comments":["# only issue refunds for one line items -> partial refund"],"line":20,"name":"def issueNValidatePartialRefunds =","match":{"location":"karate","arguments":[]},"keyword":">>> *","doc_string":{"content_type":"","value":"function(invoiceDetails, isTaxIncluded, refundStatusRetryFn1) {\n  var vendorTransactionRef = invoiceDetails.paymentTransactionInfo.vendorTransactionRef\n  var issueRefundPayload = new Object()\n  var invoiceRefId = invoiceDetails.invoiceId\n  issueRefundPayload[\"invoiceRefId\"] = invoiceRefId\n  var totalRefundAmount = 0.0\n  \/\/ this flag isTaxIncluded is for future expansion. For now it has to be set to true. Check with tax team\n  \/\/   when this flag can be modified and set to false\n  isTaxIncluded = true\n  var lineItemsList = []\n  var lineItems = invoiceDetails.lineItems\n  var liData = new Object()\n  liData[\"refundAmount\"] = lineItems[0].total\n  totalRefundAmount += liData[\"refundAmount\"]\n  liData[\"invoiceLineItemId\"] = lineItems[0].lineItemId\n  liData[\"isTaxIncluded\"] = isTaxIncluded\n  lineItemsList.push(liData)\n  issueRefundPayload[\"refundLineItems\"] = lineItemsList\n  var response = karate.call('classpath:services\/refund-submission-service\/api\/refund-submission-POST.feature', issueRefundPayload)\n  var transactionRef = response.transactionRef\n  var refundStatusPayload = {\n    \"retryValidation\": refundStatusRetryFn1,\n    \"invoiceId\": invoiceId\n  }\n  var response = karate.call('classpath:services\/refund-service\/api\/refund-status-GET.feature', refundStatusPayload)\n}","line":20}},{"result":{"duration":484542,"status":"passed"},"comments":["# only issue refunds for one line items -> partial refund"],"line":51,"name":"def issueNValidatePartialRefundsWithMock =","match":{"location":"karate","arguments":[]},"keyword":">>> *","doc_string":{"content_type":"","value":"function(invoiceDetails, isTaxIncluded, refundStatusRetryFn1, refundStatusRetryFn2) {\n  var vendorTransactionRef = invoiceDetails.paymentTransactionInfo.vendorTransactionRef\n  var issueRefundPayload = new Object()\n  var invoiceRefId = invoiceDetails.invoiceId\n  issueRefundPayload[\"invoiceRefId\"] = invoiceRefId\n  var totalRefundAmount = 0.0\n  \/\/ this flag isTaxIncluded is for future expansion. For now it has to be set to true. Check with tax team\n  \/\/   when this flag can be modified and set to false\n  isTaxIncluded = true\n  var lineItemsList = []\n  var lineItems = invoiceDetails.lineItems\n  var liData = new Object()\n  liData[\"refundAmount\"] = lineItems[0].total\n  totalRefundAmount += liData[\"refundAmount\"]\n  liData[\"invoiceLineItemId\"] = lineItems[0].lineItemId\n  liData[\"isTaxIncluded\"] = isTaxIncluded\n  lineItemsList.push(liData)\n  issueRefundPayload[\"refundLineItems\"] = lineItemsList\n  var response = karate.call('classpath:services\/refund-submission-service\/api\/refund-submission-POST.feature', issueRefundPayload)\n  var transactionRef = response.transactionRef\n  var refundStatusPayload = {\n    \"retryValidation\": refundStatusRetryFn1,\n    \"invoiceId\": invoiceId\n  }\n  var response = karate.call('classpath:services\/refund-service\/api\/refund-status-GET.feature', refundStatusPayload)\n  console.log(JSON.stringify(response))\n  java.lang.Thread.sleep(2000);\n  var issueRefundPaymentResponsePayload = new Object()\n  issueRefundPaymentResponsePayload[\"invoiceId\"] = invoiceDetails.invoiceId\n  issueRefundPaymentResponsePayload[\"orderId\"] = response.response[0].refundTransactionId\n  issueRefundPaymentResponsePayload[\"transactionId\"] = invoiceDetails.paymentTransactionInfo.paymentTransactionId\n  issueRefundPaymentResponsePayload[\"processor\"] = invoiceDetails.paymentTransactionInfo.processorName\n  var response = karate.call('classpath:services\/refund-service\/api\/refund-payment-response-POST.feature', issueRefundPaymentResponsePayload)\n  var transactionRef = response.transactionRef\n  var refundStatusPayload = {\n    \"retryValidation\": refundStatusRetryFn2,\n    \"invoiceId\": invoiceId\n  }\n  var response = karate.call('classpath:services\/refund-service\/api\/refund-status-GET.feature', refundStatusPayload)\n}","line":51}},{"name":"call read('classpath:services\/refund-shim-service\/refund-shim-service.feature')","result":{"duration":13511792,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":98},{"name":"services\/refund-shim-service\/refund-shim-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":98},{"name":"json refundShimService = read('classpath:services\/refund-shim-service\/refund-shim-service.json');","result":{"duration":1098292,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def refundShimServiceBaseUrl = getBaseUrl(refundShimService)","result":{"duration":659292,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/refund-submission-service\/refund-submission-service.feature')","result":{"duration":12255875,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":99},{"name":"services\/refund-submission-service\/refund-submission-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":99},{"name":"json refundSubmissionService = read('classpath:services\/refund-submission-service\/refund-submission-service.json');","result":{"duration":562167,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def refundSubmissionServiceBaseUrl = getBaseUrl(refundSubmissionService)","result":{"duration":441292,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/register-disney\/registerDisney.feature')","result":{"duration":13027125,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":100},{"name":"services\/register-disney\/registerDisney.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":100},{"name":"json registerDisney = read('classpath:services\/register-disney\/registerdisney.json');","result":{"duration":531000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def registerDisneyBaseUrl = getBaseUrl(registerDisney)","result":{"duration":379041,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/revenue-share-service\/revenue-share-service.feature')","result":{"duration":25889625,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":101},{"name":"services\/revenue-share-service\/revenue-share-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":101},{"name":"json revenueShareService = read('classpath:services\/revenue-share-service\/revenue-share-service.json');","result":{"duration":2206875,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def revenueShareServiceBaseUrl = getBaseUrl(revenueShareService)","result":{"duration":760291,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/rexbanner\/rexbanner.feature')","result":{"duration":19794334,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":102},{"name":"services\/rexbanner\/rexbanner.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":102},{"name":"json rexbanner = read('classpath:services\/rexbanner\/rexbanner.json');","result":{"duration":659666,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def rexbannerBaseUrl = getBaseUrl(rexbanner)","result":{"duration":650708,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def sfCustomerSearchAuth = call read('classpath:shared\/basic-auth.js') { username: 'agora-sf-stg', password: '9~n&BqH\/@5BK?G@-@DQWi&*2?1xDW`1l' }","result":{"duration":1099958,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":8},{"name":"def rexBannerTutToken =","result":{"duration":100250,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":10,"doc_string":{"content_type":"","value":"function () {\n    var TutTokenCache = Java.type('cache.TutTokenCache');\n    return \"Tut \" + TutTokenCache.getTutToken(\"Rexbanner-Kn\", \"b4898bf6-ed84-48e2-a1aa-a4f43345abdc\", \"SIGNED\");\n}","line":10}},{"name":"call read('classpath:services\/sheerId\/sheerId.feature')","result":{"duration":14330000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":103},{"name":"services\/sheerId\/sheerId.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":103},{"name":"json sheerId = read('classpath:services\/sheerId\/sheerId.json');","result":{"duration":585792,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def sheerIdBaseUrl = getBaseUrl(sheerId)","result":{"duration":631584,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"call read('classpath:services\/smart-discount-service\/smart-discount-service.feature')","result":{"duration":17360042,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":104},{"name":"services\/smart-discount-service\/smart-discount-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":104},{"name":"json smartDiscountService = read('classpath:services\/smart-discount-service\/smart-discount-service.json');","result":{"duration":690750,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":4},{"name":"def smartDiscountServiceBaseUrl = getBaseUrl(smartDiscountService)","result":{"duration":374292,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"call read('classpath:services\/spotify\/setup-spotify.feature')","result":{"duration":16218709,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":105},{"name":"services\/spotify\/setup-spotify.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":105},{"name":"json spotify = read('classpath:services\/spotify\/spotify.json');","result":{"duration":678666,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":4},{"name":"def spotifyBaseUrl = getBaseUrl(spotify)","result":{"duration":441417,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def spotifyAuth = call read('classpath:shared\/basic-auth.js') { username: 'payment', password: 'Hulu12312' }","result":{"duration":429417,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/sprint-sync-mock-service\/setup-sprint-sync-mock-service.feature')","result":{"duration":16995958,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":106},{"name":"services\/sprint-sync-mock-service\/setup-sprint-sync-mock-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":106},{"name":"json sprintSyncMockService = read('classpath:services\/sprint-sync-mock-service\/sprint-sync-mock-service.json');","result":{"duration":664666,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def sprintSyncMockServiceBaseUrl = getBaseUrl(sprintSyncMockService)","result":{"duration":470292,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/sprint-sync\/setup-sprint-sync.feature')","result":{"duration":16823500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":107},{"name":"services\/sprint-sync\/setup-sprint-sync.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":107},{"name":"json sprintSync = read('classpath:services\/sprint-sync\/sprint-sync.json');","result":{"duration":856625,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":4},{"name":"def sprintSyncBaseUrl = getBaseUrl(sprintSync)","result":{"duration":539125,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def sprintSyncAuth = call read('classpath:shared\/basic-auth.js') { username: 'payment', password: 'Hulu12312' }","result":{"duration":675250,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/sprint\/setup-sprint.feature')","result":{"duration":14116000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":108},{"name":"services\/sprint\/setup-sprint.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":108},{"name":"json sprint = read('classpath:services\/sprint\/sprint.json');","result":{"duration":1203458,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":4},{"name":"def sprintBaseUrl = getBaseUrl(sprint)","result":{"duration":736458,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def sprintAuth = call read('classpath:shared\/basic-auth.js') { username: 'payment', password: 'Hulu12312' }","result":{"duration":416083,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/stampbook\/stampbook-service.feature')","result":{"duration":28033125,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":109},{"name":"services\/stampbook\/stampbook-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":109},{"name":"json stampbookService = read('classpath:services\/stampbook\/stampbook-service.json');","result":{"duration":525167,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def stampbookServiceBaseUrl = getBaseUrl(stampbookService)","result":{"duration":476000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def stampbookSubPayHost =","result":{"duration":3275875,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":9,"doc_string":{"content_type":"","value":"function getStampbookSubPayHost(env) {\n  return env.includes('prod') === true ? 'prod-subpay' : 'staging-subpay';\n}","line":9}},{"name":"def stampbookHost = stampbookSubPayHost(karate.get('env', 'staging'))","result":{"duration":1339917,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":15},{"name":"call read('classpath:services\/sublife-platform\/sublife-platform.feature')","result":{"duration":22827417,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":110},{"name":"services\/sublife-platform\/sublife-platform.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":110},{"name":"json sublifePlatform = read('classpath:services\/sublife-platform\/sublife-platform.json');","result":{"duration":2583833,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def sublifePlatformBaseUrl = getBaseUrl(sublifePlatform)","result":{"duration":567542,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def sublifePlatformBasicAuth = basicAuth(sublifePlatform.credentials.username, sublifePlatform.credentials.password)","result":{"duration":396542,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"call read('classpath:services\/subscription-credit\/subscription-credit.feature')","result":{"duration":15734083,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":111},{"name":"services\/subscription-credit\/subscription-credit.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":111},{"name":"json subscriptionCredit = read('classpath:services\/subscription-credit\/subscription-credit.json');","result":{"duration":617208,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def subscriptionCreditBaseUrl = getBaseUrl(subscriptionCredit)","result":{"duration":553959,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def subscriptionCreditAuth = basicAuth( subscriptionCredit.credentials.username, subscriptionCredit.credentials.password)","result":{"duration":1575208,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"call read('classpath:services\/subscription-history-aggregator\/subscription-history-aggregator.feature')","result":{"duration":19182708,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":112},{"name":"services\/subscription-history-aggregator\/subscription-history-aggregator.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":112},{"name":"json subscriptionHistoryAggregator = read('classpath:services\/subscription-history-aggregator\/subscription-history-aggregator.json');","result":{"duration":1215958,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"copy sha = subscriptionHistoryAggregator","result":{"duration":568708,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def subscriptionHistoryAggregatorBaseUrl = getBaseUrl(subscriptionHistoryAggregator)","result":{"duration":4133042,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":8},{"name":"copy shaBaseUrl = subscriptionHistoryAggregatorBaseUrl","result":{"duration":56125,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":9},{"name":"def subscriptionHistoryAggregatorAuth = basicAuth( subscriptionHistoryAggregator.credentials.username, subscriptionHistoryAggregator.credentials.password)","result":{"duration":507000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":11},{"name":"copy shaAuth = subscriptionHistoryAggregatorAuth","result":{"duration":21292,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":12},{"name":"call read('classpath:services\/subscription-scheduler\/subscription-scheduler.feature')","result":{"duration":26153708,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":113},{"name":"services\/subscription-scheduler\/subscription-scheduler.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":113},{"name":"json subSchedulerServices = read('classpath:services\/subscription-scheduler\/subscription-scheduler.json');","result":{"duration":710708,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def subSchedulerServicesBaseUrl = getBaseUrl(subSchedulerServices)","result":{"duration":9148541,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/subscription-scheduler-poller\/subscription-scheduler-poller.feature')","result":{"duration":103122875,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":114},{"name":"services\/subscription-scheduler-poller\/subscription-scheduler-poller.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":114},{"name":"json subSchedulerPollerServices = read('classpath:services\/subscription-scheduler-poller\/subscription-scheduler-poller.json');","result":{"duration":587917,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def subSchedulerServicesPollerBaseUrl = getBaseUrl(subSchedulerPollerServices)","result":{"duration":430583,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"json subSchedulerPollerServicesCp3 = read('classpath:services\/subscription-scheduler-poller\/subscription-scheduler-poller-cp3.json');","result":{"duration":2107292,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":8},{"name":"def subSchedulerServicesPollerCp3BaseUrl = getBaseUrl(subSchedulerPollerServicesCp3)","result":{"duration":569166,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":9},{"name":"call read('classpath:services\/subscription-services\/subscription-services.feature')","result":{"duration":21369583,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":115},{"name":"services\/subscription-services\/subscription-services.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":115},{"name":"json subscriptionServices = read('classpath:services\/subscription-services\/subscription-services.json');","result":{"duration":8694708,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def subscriptionServicesBaseUrl = getBaseUrl(subscriptionServices)","result":{"duration":460541,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def subscriptionAuth = call read('classpath:shared\/basic-auth.js') { username: 'subscription-user', password: 'test2' }","result":{"duration":442625,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"call read('classpath:services\/taxation-service\/taxation-service.feature')","result":{"duration":22723458,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":116},{"name":"services\/taxation-service\/taxation-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":116},{"name":"json taxationService = read('classpath:services\/taxation-service\/taxation-service.json');","result":{"duration":558209,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def taxationServiceBaseUrl = getBaseUrl(taxationService)","result":{"duration":385333,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"result":{"duration":3356667,"status":"passed"},"comments":["# Input to this should be the response of transaction-referrence-GET.feature for a signup transaction"],"line":9,"name":"def validateOrderTypeInTaxTransactionForSignupResume =","match":{"location":"karate","arguments":[]},"keyword":">>> *","doc_string":{"content_type":"","value":"function(response, eventType=\"SIGNUP\") {\n  if(eventType != \"SIGNUP\" && eventType != \"RESUME\") {\n    throw new Error(`Invalid Event Type received. Can be SIGNUP or RESUME. Received ${eventType}`);\n  }\n  if(eventType == \"SIGNUP\") {\n    var orderType = response.transactions[0].orderType\n    var sourceOfRequest = response.transactions[0].metadata.sourceOfRequest\n    if ((sourceOfRequest == \"order-storage-processor\" && orderType != \"NEW_ORDER\")) {\n      throw new Error(`Invalid orderType found for sourceOfRequest=order-storage-processor. Expected NEW_ORDER. Found ${orderType}`);\n    }\n    if((sourceOfRequest == \"invoice-tax-settler-lambda-qa\" && orderType != \"SIGNUP\")) {\n      throw new Error(`Invalid orderType found for sourceOfRequest=invoice-tax-settler-lambda-qa. Expected SIGNUP. Found ${orderType}`);\n    }\n  }\n  if(eventType == \"RESUME\") {\n    var orderType = response.transactions[0].orderType\n    var sourceOfRequest = response.transactions[0].metadata.sourceOfRequest\n    if ((sourceOfRequest == \"order-storage-processor\" && orderType != \"RESUME_ORDER\")) {\n      throw new Error(`Invalid orderType found for sourceOfRequest=order-storage-processor. Expected RESUME_ORDER. Found ${orderType}`);\n    }\n    if((sourceOfRequest == \"invoice-tax-settler-lambda-qa\" && orderType != \"RECURRENCE\")) {\n      throw new Error(`Invalid orderType found for sourceOfRequest=invoice-tax-settler-lambda-qa. Expected RECURRENCE. Found ${orderType}`);\n    }\n  }\n}","line":9}},{"result":{"duration":321958,"status":"passed"},"comments":["# Input to this should be the response of transaction-referrence-GET.feature for a switch transaction"],"line":39,"name":"def validateOrderTypeInTaxTransactionForSwitch =","match":{"location":"karate","arguments":[]},"keyword":">>> *","doc_string":{"content_type":"","value":"function (taxTransactionResp, immediateSwitch) {\n  if (immediateSwitch) {\n    var orderType = taxTransactionResp.transactions[0].orderType\n    var sourceOfRequest = taxTransactionResp.transactions[0].metadata.sourceOfRequest\n    if ((sourceOfRequest == \"order-storage-processor\" && orderType != \"SWITCH\")) {\n      throw new Error(`Invalid orderType found for sourceOfRequest=order-storage-processor. Expected SWITCH. Found ${orderType}`);\n    }\n    if((sourceOfRequest == \"invoice-tax-settler-lambda-qa\" && orderType != \"PLAN_SWITCH\")) {\n      throw new Error(`Invalid orderType found for sourceOfRequest=invoice-tax-settler-lambda-qa. Expected PLAN_SWITCH. Found ${orderType}`);\n    }\n  }\n  if (!immediateSwitch) {\n    var orderType = taxTransactionResp.transactions[0].orderType\n    var sourceOfRequest = taxTransactionResp.transactions[0].metadata.sourceOfRequest\n    if ((sourceOfRequest == \"order-storage-processor\" && orderType != \"NEW_ORDER\")) {\n      throw new Error(`Invalid orderType found for sourceOfRequest=order-storage-processor. Expected NEW_ORDER. Found ${orderType}`);\n    }\n    if((sourceOfRequest == \"invoice-tax-settler-lambda-qa\" && orderType != \"SIGNUP\")) {\n      throw new Error(`Invalid orderType found for sourceOfRequest=invoice-tax-settler-lambda-qa. Expected SIGNUP. Found ${orderType}`);\n    }\n  }\n}","line":39}},{"result":{"duration":190833,"status":"passed"},"comments":["# Input to this should be a transaction reference object (response of transaction-referrence-GET.feature)"],"line":66,"name":"def generateRefundAmountArrayFromTransactionReference =","match":{"location":"karate","arguments":[]},"keyword":">>> *","doc_string":{"content_type":"","value":"function(transactionReference) {\n  var lineItems = transactionReference.lineItems\n  var lineItemsList = []\n  for(var i=0; i < lineItems.length; i++) {\n    var refundAmount = lineItems[i].lineItemSummary.basePrice + lineItems[i].lineItemSummary.totalCalculatedTax\n    lineItemsList[i] = refundAmount\n  }\n  return lineItemsList\n}","line":66}},{"name":"def getRefundTotalFromTransactions =","result":{"duration":120334,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":79,"doc_string":{"content_type":"","value":"function(transaction) {\n  var refundTotal = 0\n  for(var i=0; i < transaction.lineItems.length; i++){\n    refundTotal += transaction.lineItems[i].extendedPrice\n  }\n  return refundTotal\n}","line":79}},{"name":"call read('classpath:services\/tax-quote-service\/tax-quote-service.feature')","result":{"duration":11670625,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":117},{"name":"services\/tax-quote-service\/tax-quote-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":117},{"name":"json taxQuoteService = read('classpath:services\/tax-quote-service\/tax-quote-service.json');","result":{"duration":521042,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def taxQuoteServiceBaseUrl = getBaseUrl(taxQuoteService)","result":{"duration":353958,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/three-ds-frontier\/three-ds-frontier.feature')","result":{"duration":11299917,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":118},{"name":"services\/three-ds-frontier\/three-ds-frontier.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":118},{"name":"json threeDSFrontier = read('classpath:services\/three-ds-frontier\/three-ds-frontier.json');","result":{"duration":790709,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":4},{"name":"def threeDSFrontierBaseUrl = getBaseUrl(threeDSFrontier)","result":{"duration":414916,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"call read('classpath:services\/tokenizer\/tokenizer.feature')","result":{"duration":16031416,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":119},{"name":"services\/tokenizer\/tokenizer.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":119},{"name":"json tokenizerConfig = read('classpath:services\/tokenizer\/tokenizer.json');","result":{"duration":689708,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def tokenizerBaseUrl = getBaseUrl(tokenizerConfig)","result":{"duration":507208,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"def tokenizerAuth = call read('classpath:shared\/basic-auth.js') { username: 'payment', password: 'Hulu12312' }","result":{"duration":498833,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":8},{"name":"def whitelistAuth = call read('classpath:shared\/basic-auth.js') { username: 'whitelist', password: 'test' }","result":{"duration":780708,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":9},{"name":"call read('classpath:services\/tut\/tut.feature')","result":{"duration":12413292,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":120},{"name":"services\/tut\/tut.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":120},{"name":"json tut = read('classpath:services\/tut\/tut.json');","result":{"duration":546500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def tutBaseUrl = getBaseUrl(tut)","result":{"duration":553959,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"call read('classpath:services\/unified-credit-service\/unified-credit-service.feature')","result":{"duration":14828167,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":121},{"name":"services\/unified-credit-service\/unified-credit-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":121},{"name":"json unifiedCredit = read('classpath:services\/unified-credit-service\/unified-credit-service.json');","result":{"duration":649375,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def unifiedCreditBaseUrl = getBaseUrl(unifiedCredit)","result":{"duration":440083,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def getInvoiceCreditsTotalFromBillingCredits =","result":{"duration":2050875,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":8,"doc_string":{"content_type":"","value":"function(billingCredits) {\n  var invoiceCreditsTotal = 0\n  for(const billingCredit of billingCredits){\n    if (billingCredit[\"creditType\"] == \"InvoiceCredit\") {\n      invoiceCreditsTotal += billingCredit[\"balance\"]\n    }\n  }\n  return invoiceCreditsTotal\n}","line":8}},{"name":"call read('classpath:services\/unified-invoice-service\/unified-invoice-service.feature')","result":{"duration":16346083,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":122},{"name":"services\/unified-invoice-service\/unified-invoice-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":122},{"name":"json unifiedInvoice = read('classpath:services\/unified-invoice-service\/unified-invoice-service.json');","result":{"duration":464833,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def unifiedInvoiceBaseUrl = getBaseUrl(unifiedInvoice)","result":{"duration":583125,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def getBillingCreditsAppliedTotalFromInvoice =","result":{"duration":357084,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":8,"doc_string":{"content_type":"","value":"function(invoice) {\n  var invoiceBillingCreditsAppliedTotal = 0\n  for(const lineItem of invoice[\"lineItems\"]){\n    for(const billingCA of lineItem[\"billingCreditsApplied\"]){\n      if (billingCA[\"creditType\"] == \"INVOICE\") {\n        invoiceBillingCreditsAppliedTotal += billingCA[\"amount\"]\n      }\n    }\n  }\n  return invoiceBillingCreditsAppliedTotal\n}","line":8}},{"name":"def getBillingCreditsGeneratedTotalFromInvoice =","result":{"duration":160542,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":23,"doc_string":{"content_type":"","value":"function(invoice) {\n  var invoiceBillingCreditsGeneratedTotal = 0\n  for(const lineItem of invoice[\"lineItems\"]){\n    for(const billingCA of lineItem[\"billingCreditsGenerated\"]){\n      if (billingCA[\"creditType\"] == \"INVOICE\") {\n        invoiceBillingCreditsGeneratedTotal += billingCA[\"amount\"]\n      }\n    }\n  }\n  return invoiceBillingCreditsGeneratedTotal\n}","line":23}},{"name":"def getRefundTotalFromIssuedRefunds =","result":{"duration":292584,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":38,"doc_string":{"content_type":"","value":"function(invoice) {\n  var refundTotal = 0\n  for(var i=0; i < invoice.lineItems.length; i++){\n    refundTotal += invoice.lineItems[i].refundTotal\n  }\n  return refundTotal\n}","line":38}},{"name":"def getAllRevenueValues =","result":{"duration":2513125,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":49,"doc_string":{"content_type":"","value":"function (invoices, salesPlatform, salesPlatformSwitch){\n var products = {};\n for(var j = invoices.length-1; j >= 0 ; j--){\n   var lineItems = invoices[j].lineItems;\n   var contextFromInvoice = (invoices[j].context == \"PLAN_SWITCH\") ? \"SWITCH\" : invoices[j].context;\n   var salesPlatformFromInvoice = (contextFromInvoice == \"SIGNUP\") ? salesPlatform : salesPlatformSwitch\n     for(var i = 0; i < lineItems.length; i++){\n       var lineItemId = lineItems[i].lineItemId;\n       if(!(lineItemId in products)){\n         var revShareCostBase = (contextFromInvoice == \"SIGNUP\") ? lineItems[i].unitPrice :(incrementalRevenue * lineItems[i].unitPrice) \/ totalUnitPriceRestOfProducts;\n         products[lineItemId] = {\n             revenueShareCostBase : revShareCostBase.toFixed(2),\n             context: contextFromInvoice,\n             salesPlatform: salesPlatformFromInvoice,\n             unitPrice: lineItems[i].unitPrice\n           };\n       }\n     }\n }\n   return products;\n}","line":49}},{"name":"call read('classpath:services\/unified-order-submission\/unified-order-submission.feature')","result":{"duration":17578000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":123},{"name":"services\/unified-order-submission\/unified-order-submission.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":123},{"name":"json uosubJson = read('classpath:services\/unified-order-submission\/unified-order-submission.json');","result":{"duration":486542,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def uosubBaseUrl = getBaseUrl(uosubJson)","result":{"duration":530000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def waitUntilOrderCompletes =","result":{"duration":734084,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":8,"doc_string":{"content_type":"","value":"function(x=5, expectedOrderStatus=\"SUCCESS\") {\n  while (true) {\n    var result = karate.call('classpath:services\/unified-order-submission\/get-order.feature');\n    var status = result.response.status;\n    karate.log('expected order status', expectedOrderStatus);\n    karate.log('poll status', status);\n    if (status == expectedOrderStatus) {\n      karate.log('condition satisfied, exiting');\n      return status;\n    }\n    karate.log('sleeping');\n    \/\/ uncomment \/ modify the sleep time as per your wish\n    x--;\n    if (x == 0) {\n      karate.log('condition NOT satisfied, exiting');\n      return status;\n    }\n    karate.log('Number of tries remaining: ' + x);\n    java.lang.Thread.sleep(2000);\n  }\n}","line":8}},{"result":{"duration":1288500,"status":"passed"},"comments":["# Input to this is the response of private-subscription-context-GET.feature"],"line":37,"name":"def getSubContextForSwitchOrderv2 =","match":{"location":"karate","arguments":[]},"keyword":">>> *","doc_string":{"content_type":"","value":"function(subResponse) {\n  var subContext = new Object();\n  var identityIdObj = new Object();\n  identityIdObj[\"value\"] = subResponse.identityId;\n  subContext[\"identityId\"] = identityIdObj;\n  var agreementsArr = [];\n  for(agreementIndex in subResponse[\"agreements\"]){\n    var agreementObj = new Object();\n    var agreement = subResponse[\"agreements\"][agreementIndex]\n    var aIdObj = new Object();\n    aIdObj[\"value\"] = agreement.agreementId;\n    agreementObj[\"agreementId\"] = aIdObj;\n    var sourceObj = new Object();\n    var tObj = new Object()\n    tObj[\"value\"] = agreement.source.type;\n    sourceObj[\"type\"] = tObj;\n    var pvObj = new Object()\n    pvObj[\"value\"] = agreement.source.provider;\n    sourceObj[\"provider\"] = pvObj;\n    var ptObj = new Object()\n    ptObj[\"value\"] = agreement.source.partner;\n    sourceObj[\"partner\"] = ptObj;\n    agreementObj[\"source\"] = sourceObj;\n    agreementObj[\"createdDate\"] = agreement.createdDate !== undefined ? { value: agreement.createdDate } : undefined;\n    var isTestObj = new Object();\n    isTestObj[\"value\"] = agreement.isTest;\n    agreementObj[\"isTest\"] = isTestObj;\n    agreementObj[\"interval\"] = agreement.interval !== undefined ? { value: agreement.interval } : undefined;\n    agreementObj[\"billingCalendarDate\"] = agreement.billingCalendarDate !== undefined ? { value: agreement.billingCalendarDate } : undefined;\n    agreementObj[\"walletId\"] = agreement.walletId !== undefined ? { value: agreement.walletId } : undefined;\n    agreementObj[\"paymentMethodId\"] = agreement.paymentMethodId !== undefined ? { value: agreement.paymentMethodId } : undefined;\n    var pACIdObj = new Object();\n    pACIdObj[\"value\"] = agreement.paymentAttemptCount;\n    agreementObj[\"paymentAttemptCount\"] = pACIdObj;\n    var subscriptionsArr = [];\n    for(subscriptionIndex in agreement[\"subscriptions\"]){\n      var subscriptionObj = new Object();\n      var subscription = agreement[\"subscriptions\"][subscriptionIndex]\n      var sIdObj = new Object();\n      sIdObj[\"value\"] = subscription.subscriptionId;\n      subscriptionObj[\"subscriptionId\"] = sIdObj;\n      var oSIdObj = new Object();\n      oSIdObj[\"value\"] = subscription.originalSubscriptionId;\n      subscriptionObj[\"originalSubscriptionId\"] = oSIdObj;\n      var offerObj = new Object();\n      var iObj = new Object();\n      iObj[\"value\"] = subscription.offer.id;\n      offerObj[\"id\"] = iObj;\n      offerObj[\"name\"] = subscription.offer.name;\n      subscriptionObj[\"offer\"] = offerObj;\n      var iEObj = new Object();\n      iEObj[\"value\"] = subscription.isEntitled;\n      subscriptionObj[\"isEntitled\"] = iEObj;\n      subscriptionObj[\"state\"] = subscription.state;\n      var productArr = []\n      for(productIndex in subscription[\"products\"]){\n        var productObj = new Object();\n        var product = subscription[\"products\"][productIndex];\n        var idObj = new Object();\n        idObj[\"value\"] = product.id;\n        productObj[\"id\"] = idObj;\n        productObj[\"name\"] = product.name;\n        var campaignObj = new Object();\n        var iObj = new Object();\n        iObj[\"value\"] = product.campaign.id;\n        campaignObj[\"id\"] = iObj;\n        productObj[\"campaign\"] = campaignObj;\n        var phaseObj = new Object();\n        var iObj = new Object();\n        iObj[\"value\"] = product.phase.id;\n        phaseObj[\"id\"] = iObj;\n        phaseObj[\"duration\"] = product.phase.duration;\n        phaseObj[\"phaseType\"] = product.phase.phaseType;\n        productObj[\"phase\"] = phaseObj;\n        var periodObj = new Object();\n        periodObj[\"phaseInterval\"] = product.period.phaseInterval;\n        var cPSDObj = new Object();\n        cPSDObj[\"value\"] = product.period.currentPeriodStartDate;\n        periodObj[\"currentPeriodStartDate\"] = cPSDObj;\n        var nRDObj = new Object();\n        nRDObj[\"value\"] = subscription.period.nextRenewalDate;\n        periodObj[\"nextRenewalDate\"] = nRDObj;\n        var nBDObj = new Object();\n        nBDObj[\"value\"] = subscription.period.nextBillingDate;\n        periodObj[\"nextBillingDate\"] = nBDObj;\n        productObj[\"period\"] = periodObj;\n        productObj[\"pendingRemoval\"] = product.period.pendingRemoval;\n        productArr.push(productObj);\n      }\n      subscriptionObj[\"products\"] = productArr;\n      var periodObj = new Object();\n      var cPSDObj = new Object();\n      cPSDObj[\"value\"] = subscription.period.currentPeriodStartDate;\n      periodObj[\"currentPeriodStartDate\"] = cPSDObj;\n      var nRDObj = new Object();\n      nRDObj[\"value\"] = subscription.period.nextRenewalDate;\n      periodObj[\"nextRenewalDate\"] = nRDObj;\n      var nBDObj = new Object();\n      nBDObj[\"value\"] = subscription.period.nextBillingDate;\n      periodObj[\"nextBillingDate\"] = nBDObj;\n      subscriptionObj[\"period\"] = periodObj;\n      var pDObj = new Object();\n      pDObj[\"value\"] = subscription.purchaseDate;\n      subscriptionObj[\"purchaseDate\"] = pDObj;\n      var salesMetadataObj = new Object();\n      var iOIdObj = new Object();\n      iOIdObj[\"value\"] = subscription.salesMetadata.initialOrderId;\n      salesMetadataObj[\"initialOrderId\"] = iOIdObj;\n      var pCCObj = new Object();\n      pCCObj[\"value\"] = subscription.salesMetadata.purchaseCountryCode;\n      salesMetadataObj[\"purchaseCountryCode\"] = pCCObj;\n      var cCCObj = new Object();\n      cCCObj[\"value\"] = subscription.salesMetadata.currencyCountryCode;\n      salesMetadataObj[\"currencyCountryCode\"] = cCCObj;\n      subscriptionObj[\"salesMetadata\"] = salesMetadataObj;\n      subscriptionObj[\"storefrontCountry\"] = subscription.storefrontCountry;\n      subscriptionsArr.push(subscriptionObj);\n    }\n    agreementObj[\"subscriptions\"] = subscriptionsArr;\n    agreementsArr.push(agreementObj);\n  }\n  subContext[\"agreements\"] = agreementsArr;\n  return subContext;\n}","line":37}},{"result":{"duration":986958,"status":"passed"},"comments":["# Input to this is the response of private-subscription-context-GET.feature"],"line":196,"name":"def getSubContextForResumeOrder =","match":{"location":"karate","arguments":[]},"keyword":">>> *","doc_string":{"content_type":"","value":"function(subResponse,isMembershipPause) {\n  var subContext = new Object();\n  var identityIdObj = new Object();\n  identityIdObj[\"value\"] = subResponse.identityId;\n  subContext[\"identityId\"] = identityIdObj;\n  var agreementsArr = [];\n  for(agreementIndex in subResponse[\"agreements\"]){\n    var agreementObj = new Object();\n    var agreement = subResponse[\"agreements\"][agreementIndex]\n    var aIdObj = new Object();\n    aIdObj[\"value\"] = agreement.agreementId;\n    agreementObj[\"agreementId\"] = aIdObj;\n    var sourceObj = new Object();\n    var tObj = new Object()\n    tObj[\"value\"] = agreement.source.type;\n    sourceObj[\"type\"] = tObj;\n    var pvObj = new Object()\n    pvObj[\"value\"] = agreement.source.provider;\n    sourceObj[\"provider\"] = pvObj;\n    var ptObj = new Object()\n    ptObj[\"value\"] = agreement.source.partner;\n    sourceObj[\"partner\"] = ptObj;\n    agreementObj[\"source\"] = sourceObj;\n    agreementObj[\"createdDate\"] = agreement.createdDate !== undefined ? { value: agreement.createdDate } : undefined;\n    var isTestObj = new Object();\n    isTestObj[\"value\"] = agreement.isTest;\n    agreementObj[\"isTest\"] = isTestObj;\n    agreementObj[\"interval\"] = agreement.interval !== undefined ? { value: agreement.interval } : undefined;\n    agreementObj[\"billingCalendarDate\"] = agreement.billingCalendarDate !== undefined ? { value: agreement.billingCalendarDate } : undefined;\n    agreementObj[\"walletId\"] = agreement.walletId !== undefined ? { value: agreement.walletId } : undefined;\n    agreementObj[\"paymentMethodId\"] = agreement.paymentMethodId !== undefined ? { value: agreement.paymentMethodId } : undefined;\n    var pACIdObj = new Object();\n    pACIdObj[\"value\"] = agreement.paymentAttemptCount;\n    agreementObj[\"paymentAttemptCount\"] = pACIdObj;\n    var subscriptionsArr = [];\n    for(subscriptionIndex in agreement[\"subscriptions\"]){\n      var subscriptionObj = new Object();\n      var subscription = agreement[\"subscriptions\"][subscriptionIndex]\n      var sIdObj = new Object();\n      sIdObj[\"value\"] = subscription.subscriptionId;\n      subscriptionObj[\"subscriptionId\"] = sIdObj;\n      var oSIdObj = new Object();\n      oSIdObj[\"value\"] = subscription.originalSubscriptionId;\n      subscriptionObj[\"originalSubscriptionId\"] = oSIdObj;\n      var offerObj = new Object();\n      var iObj = new Object();\n      iObj[\"value\"] = subscription.offer.id;\n      offerObj[\"id\"] = iObj;\n      offerObj[\"name\"] = subscription.offer.name;\n      subscriptionObj[\"offer\"] = offerObj;\n      var iEObj = new Object();\n      iEObj[\"value\"] = subscription.isEntitled;\n      subscriptionObj[\"isEntitled\"] = iEObj;\n      subscriptionObj[\"state\"] = subscription.state;\n      var productArr = []\n      for(productIndex in subscription[\"products\"]){\n        var productObj = new Object();\n        var product = subscription[\"products\"][productIndex];\n        var idObj = new Object();\n        idObj[\"value\"] = product.id;\n        productObj[\"id\"] = idObj;\n        productObj[\"name\"] = product.name;\n        var campaignObj = new Object();\n        var iObj = new Object();\n        iObj[\"value\"] = product.campaign.id;\n        campaignObj[\"id\"] = iObj;\n        productObj[\"campaign\"] = campaignObj;\n        var phaseObj = new Object();\n        var iObj = new Object();\n        iObj[\"value\"] = product.phase.id;\n        phaseObj[\"id\"] = iObj;\n        phaseObj[\"duration\"] = product.phase.duration;\n        phaseObj[\"phaseType\"] = product.phase.phaseType;\n        productObj[\"phase\"] = phaseObj;\n        var periodObj = new Object();\n        periodObj[\"phaseInterval\"] = product.period.phaseInterval;\n        var cPSDObj = new Object();\n        cPSDObj[\"value\"] = product.period.currentPeriodStartDate;\n        periodObj[\"currentPeriodStartDate\"] = cPSDObj;\n        var nRDObj = new Object();\n        nRDObj[\"value\"] = subscription.period.nextRenewalDate;\n        periodObj[\"nextRenewalDate\"] = nRDObj;\n        var nBDObj = new Object();\n        nBDObj[\"value\"] = subscription.period.nextBillingDate;\n        periodObj[\"nextBillingDate\"] = nBDObj;\n        productObj[\"period\"] = periodObj;\n        productObj[\"pendingRemoval\"] = product.period.pendingRemoval;\n        productArr.push(productObj);\n      }\n      subscriptionObj[\"products\"] = productArr;\n      var periodObj = new Object();\n      var cPSDObj = new Object();\n      cPSDObj[\"value\"] = subscription.period.currentPeriodStartDate;\n      periodObj[\"currentPeriodStartDate\"] = cPSDObj;\n      var nRDObj = new Object();\n      nRDObj[\"value\"] = subscription.period.nextRenewalDate;\n      periodObj[\"nextRenewalDate\"] = nRDObj;\n      var nBDObj = new Object();\n      nBDObj[\"value\"] = subscription.period.nextBillingDate;\n      periodObj[\"nextBillingDate\"] = nBDObj;\n      subscriptionObj[\"period\"] = periodObj;\n      var pDObj = new Object();\n      pDObj[\"value\"] = subscription.purchaseDate;\n      subscriptionObj[\"purchaseDate\"] = pDObj;\n      var salesMetadataObj = new Object();\n      var iOIdObj = new Object();\n      iOIdObj[\"value\"] = subscription.salesMetadata.initialOrderId;\n      salesMetadataObj[\"initialOrderId\"] = iOIdObj;\n      var pCCObj = new Object();\n      pCCObj[\"value\"] = subscription.salesMetadata.purchaseCountryCode;\n      salesMetadataObj[\"purchaseCountryCode\"] = pCCObj;\n      var cCCObj = new Object();\n      cCCObj[\"value\"] = subscription.salesMetadata.currencyCountryCode;\n      salesMetadataObj[\"currencyCountryCode\"] = cCCObj;\n      subscriptionObj[\"salesMetadata\"] = salesMetadataObj;\n      subscriptionObj[\"storefrontCountry\"] = subscription.storefrontCountry;\n      if(isMembershipPause){\n        var membershipPauseObj = new Object();\n        var pauseStartObj = new Object();\n        pauseStartObj[\"value\"] = subscription.membershipPause.pauseStart;\n        membershipPauseObj[\"pauseStart\"] = pauseStartObj;\n        var pauseEndObj = new Object();\n        pauseEndObj[\"value\"] = subscription.membershipPause.pauseEnd;\n        membershipPauseObj[\"pauseEnd\"] = pauseEndObj;\n        var pauseDurationObj = new Object();\n        pauseDurationObj[\"unit\"] = subscription.membershipPause.pauseDuration.unit;\n        pauseDurationObj[\"length\"] = subscription.membershipPause.pauseDuration.length;\n        membershipPauseObj[\"pauseDuration\"] = pauseDurationObj;\n        var pauseSourceObj = new Object();\n        pauseSourceObj[\"value\"] = subscription.membershipPause.pauseSource;\n        membershipPauseObj[\"pauseSource\"] = pauseSourceObj;\n        subscriptionObj[\"membershipPause\"] = membershipPauseObj;\n      }\n      salesMetadataObj[\"initialOrderId\"] = iOIdObj;\n      var pCCObj = new Object();\n      pCCObj[\"value\"] = subscription.salesMetadata.purchaseCountryCode;\n      salesMetadataObj[\"purchaseCountryCode\"] = pCCObj;\n      var cCCObj = new Object();\n      cCCObj[\"value\"] = subscription.salesMetadata.currencyCountryCode;\n      salesMetadataObj[\"currencyCountryCode\"] = cCCObj;\n      subscriptionObj[\"salesMetadata\"] = salesMetadataObj;\n      subscriptionsArr.push(subscriptionObj);\n    }\n    agreementObj[\"subscriptions\"] = subscriptionsArr;\n    agreementsArr.push(agreementObj);\n  }\n  subContext[\"agreements\"] = agreementsArr;\n  return subContext;\n}","line":196}},{"name":"call read('classpath:services\/unified-pricing-service\/unified-pricing-service.feature')","result":{"duration":15000125,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":124},{"name":"services\/unified-pricing-service\/unified-pricing-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":124},{"name":"json unifiedPricing = read('classpath:services\/unified-pricing-service\/unified-pricing-service.json');","result":{"duration":579792,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def unifiedPricingBaseUrl = getBaseUrl(unifiedPricing)","result":{"duration":577625,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/universal-payment-bridge\/universal-payment-bridge.feature')","result":{"duration":20413083,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":125},{"name":"services\/universal-payment-bridge\/universal-payment-bridge.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":125},{"name":"json upbJson = read('classpath:services\/universal-payment-bridge\/universal-payment-bridge.json');","result":{"duration":743833,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def upbBaseUrl = getBaseUrl(upbJson)","result":{"duration":518042,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/universal-payment-notification-receiver\/universal-payment-notification-receiver.feature')","result":{"duration":30702750,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":126},{"name":"services\/universal-payment-notification-receiver\/universal-payment-notification-receiver.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":126},{"name":"json upnrJson = read('classpath:services\/universal-payment-notification-receiver\/universal-payment-notification-receiver.json');","result":{"duration":390333,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def upnrBaseUrl = getBaseUrl(upnrJson)","result":{"duration":515542,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/upp-ui\/upp-ui.feature')","result":{"duration":11931417,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":127},{"name":"services\/upp-ui\/upp-ui.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":127},{"name":"json uppUiJson = read('classpath:services\/upp-ui\/upp-ui.json');","result":{"duration":548541,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def uppUiBaseUrl = getBaseUrl(uppUiJson)","result":{"duration":396334,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/upsell\/upsell.feature')","result":{"duration":12575042,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":128},{"name":"services\/upsell\/upsell.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":128},{"name":"json upsell = read('classpath:services\/upsell\/upsell.json')","result":{"duration":604666,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def upsellBaseUrl = getBaseUrl(upsell)","result":{"duration":580875,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def upsellAuth = basicAuth( upsell.credentials.username, upsell.credentials.password)","result":{"duration":431625,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"call read('classpath:services\/user-model\/user-model.feature')","result":{"duration":13492834,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":129},{"name":"services\/user-model\/user-model.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":129},{"name":"json userModel = read('classpath:services\/user-model\/user-model.json');","result":{"duration":604542,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":4},{"name":"def userModelBaseUrl = getBaseUrl(userModel)","result":{"duration":391167,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def userModelTutAccessToken =","result":{"duration":126583,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7,"doc_string":{"content_type":"","value":"function () {\n    var TutTokenCache = Java.type('cache.TutTokenCache');\n    return \"Tut \" + TutTokenCache.getTutToken(\"sublife-api-test\", \"TheRainInSpainFallsMainlyInThePlain\", \"signed\");\n}","line":7}},{"name":"call read('classpath:services\/wallet-service\/wallet-service.feature')","result":{"duration":36857542,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":130},{"name":"services\/wallet-service\/wallet-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":130},{"name":"json walletService = read('classpath:services\/wallet-service\/wallet-service.json');","result":{"duration":695792,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def walletServiceBaseUrl = getBaseUrl(walletService)","result":{"duration":565917,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def walletServiceBaseUrl = karate.get('useWalletHuluLink', false) == true ? walletService['host']['hulu-link'] : walletServiceBaseUrl","result":{"duration":4513125,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"def generateWalletHeaders =","result":{"duration":1005708,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":10,"doc_string":{"content_type":"","value":"function returnHeaders(accountId, identityId, partner) {\n  let headersJson =     {\n    'Content-Type': 'application\/json',\n    'Accept': 'application\/json',\n    'X-BAMTech-Is-Test': karate.get('isTestFlag', true)\n  }\n  accountId !== '' ? headersJson['X-BAMTech-Account-Id'] = accountId : {}\n  identityId !== '' ? headersJson['X-BAMTech-Identity-Id'] = identityId : {}\n  partner !== '' ? headersJson['X-BAMTech-Partner'] = partner : {}\n  return headersJson\n}","line":10}},{"name":"call read('classpath:services\/walmart\/setup-walmart.feature')","result":{"duration":16980750,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":131},{"name":"services\/walmart\/setup-walmart.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":131},{"name":"json walmart = read('classpath:services\/walmart\/walmart.json');","result":{"duration":473417,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def walmartBaseUrl = getBaseUrl(walmart)","result":{"duration":336875,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def walmartAuth = call read('classpath:shared\/basic-auth.js') { username: 'username', password: 'password' }","result":{"duration":484667,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"call read('classpath:services\/watchdog\/setup-watchdog.feature')","result":{"duration":17239333,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":132},{"name":"services\/watchdog\/setup-watchdog.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":132},{"name":"json watchdog = read('classpath:services\/watchdog\/watchdog.json');","result":{"duration":594375,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def watchdogBaseUrl = getBaseUrl(watchdog)","result":{"duration":578625,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def watchdogAuth = call read('classpath:shared\/basic-auth.js') { username: 'fraud', password: 'test1' }","result":{"duration":372125,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"call read('classpath:services\/web-portal-mercury\/web-portal-mercury.feature')","result":{"duration":19031542,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":133},{"name":"services\/web-portal-mercury\/web-portal-mercury.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":133},{"name":"json webPortalMercury = read('classpath:services\/web-portal-mercury\/web-portal-mercury.json');","result":{"duration":464625,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def webPortalMercuryBaseUrl = getBaseUrl(webPortalMercury)","result":{"duration":931167,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/yokozuna\/yokozuna.feature')","result":{"duration":17552417,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":134},{"name":"services\/yokozuna\/yokozuna.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":134},{"name":"json yokozuna = read('classpath:services\/yokozuna\/yokozuna.json');","result":{"duration":669417,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def yokozunaBaseUrl = getBaseUrl(yokozuna)","result":{"duration":1454209,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"call read('classpath:services\/dss-subscription-skynet\/dss-subscription-skynet.feature')","result":{"duration":13045875,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":135},{"name":"services\/dss-subscription-skynet\/dss-subscription-skynet.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":135},{"name":"json dssSubscriptionSkynetService = read('classpath:services\/dss-subscription-skynet\/dss-subscription-skynet.json');","result":{"duration":490333,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def dssSubscriptionSkynetServiceBaseUrl = getBaseUrl(dssSubscriptionSkynetService)","result":{"duration":492292,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"call read('classpath:services\/invoice-producer\/invoice-producer.feature')","result":{"duration":18633375,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":136},{"name":"services\/invoice-producer\/invoice-producer.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":136},{"name":"json invoiceProducer = read('classpath:services\/invoice-producer\/invoice-producer.json');","result":{"duration":500709,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def invoiceProducerBaseUrl = getBaseUrl(invoiceProducer)","result":{"duration":496709,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"result":{"duration":447958,"status":"passed"},"comments":["# Computes total of all the billing credits for a given creditType. If creditType passed is empty string (\"\"), it","# adds up all the credits irrespective of the type."],"line":10,"name":"def computeBillingCreditsTotal =","match":{"location":"karate","arguments":[]},"keyword":">>> *","doc_string":{"content_type":"","value":"function (billingCreditsJSON, creditType = \"INVOICE\") {\n  var total = 0\n  for(var i = 0; i < billingCreditsJSON.length; i++){\n    if (billingCreditsJSON[i].creditType == creditType.toUpperCase()) {\n      total += billingCreditsJSON[i].amount\n    }\n    else if (billingCreditsJSON[i].creditType == \"\") {\n      total += billingCreditsJSON[i].amount\n    }\n  }\n  return total\n}","line":10}},{"name":"def getRandomNumberOfDigits = function(n){ return (Math.floor(Math.random() * Math.pow(9, n)) + Math.pow(10, n-1)) }","result":{"duration":58625,"status":"passed"},"match":{"location":"karate","arguments":[]},"comments":["# return randomized number with set amount of digits"],"keyword":">>> *","line":27},{"result":{"duration":78041,"status":"passed"},"comments":["# adds totals from array, fixes floating point issue in javascript, limits 2 decimals"],"line":30,"name":"def getTotals =","match":{"location":"karate","arguments":[]},"keyword":">>> *","doc_string":{"content_type":"","value":"function (arg) {\n  var total = 0\n  for(var i = 0; i < arg.length; i++){\n    total += arg[i]\n  }\n  return  parseFloat(total.toFixed(2))\n}","line":30}},{"name":"def getDaysInMonthToday =","result":{"duration":75833,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":41,"doc_string":{"content_type":"","value":"function (){\nvar date = new Date()\nvar year = date.getFullYear()\nconsole.log(\"year \"+year)\nvar month = date.getMonth()\nconsole.log(\"month \"+month)\nvar days = new Date(year, month, 0).getDate()\nconsole.log(\"days \"+days)\nreturn days\n}","line":41}},{"name":"def getDaysInMonth =","result":{"duration":279208,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":55,"doc_string":{"content_type":"","value":"function (month, year){\nvar date = new Date()\nvar days = new Date(year, month, 0).getDate()\nconsole.log(\"days \"+days)\n\/\/return Math.trunc(days)\nreturn days\n}","line":55}},{"name":"def getYear =","result":{"duration":56417,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":66,"doc_string":{"content_type":"","value":"function (){\nvar date = new Date()\nvar year = date.getFullYear()\nreturn year\n}","line":66}},{"name":"def getMonth =","result":{"duration":67334,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":75,"doc_string":{"content_type":"","value":"function (){\nvar date = new Date()\nvar month = date.getMonth()\nconsole.log(\"month \"+month)\nreturn month\n}","line":75}},{"name":"def getMonthOfDate =","result":{"duration":45917,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":86,"doc_string":{"content_type":"","value":"function (strInstant){\nvar date = new Date(strInstant)\nvar month = date.getMonth()\nreturn month\n}","line":86}},{"name":"def getYearOfDate =","result":{"duration":41709,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":95,"doc_string":{"content_type":"","value":"function (strInstant){\nvar date = new Date(strInstant)\nvar year = date.getFullYear()\nreturn year\n}","line":95}},{"name":"def roundUpDay =","result":{"duration":62792,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":105,"doc_string":{"content_type":"","value":"function (days){\n  var trunc = Math.trunc(days)\n  if (days > trunc ) trunc = trunc + 1\n  return trunc\n  }","line":105}},{"result":{"duration":81875,"status":"passed"},"comments":["# Input should be the response of the private-subscription-context-GET.feature"],"line":115,"name":"def getSubContextForInvoiceDryRun =","match":{"location":"karate","arguments":[]},"keyword":">>> *","doc_string":{"content_type":"","value":"function(subResponse) {\n  var subContext = new Object();\n  subContext[\"identityId\"] = subResponse.identityId;\n  subContext[\"agreements\"] = subResponse.agreements;\n  return subContext;\n}","line":115}},{"result":{"duration":231667,"status":"passed"},"comments":["# Input should be the response of the order-diff-GET.feature"],"line":127,"name":"def getOrderDiffsForDryRunForSwitch =","match":{"location":"karate","arguments":[]},"keyword":">>> *","doc_string":{"content_type":"","value":"function(diffResponse) {\n  var diffItemsContext = [];\n  for(diffItemIndex in diffResponse[\"order_diff\"][\"diff_items\"]){\n    di = {};\n    di[\"productId\"] = diffResponse[\"order_diff\"][\"diff_items\"][diffItemIndex][\"product_id\"][\"value\"];\n    di[\"diffAction\"] = diffResponse[\"order_diff\"][\"diff_items\"][diffItemIndex][\"action\"];\n    di[\"switchAction\"] = diffResponse[\"order_diff\"][\"diff_items\"][diffItemIndex][\"switch_action\"];\n    var offer_context = {};\n    offer_context[\"campaignId\"] = diffResponse[\"order_diff\"][\"diff_items\"][diffItemIndex][\"offer_context\"][\"campaign_id\"][\"value\"];\n    offer_context[\"phaseId\"] = diffResponse[\"order_diff\"][\"diff_items\"][diffItemIndex][\"offer_context\"][\"phase_id\"][\"value\"];\n    offer_context[\"offerId\"] = diffResponse[\"order_diff\"][\"diff_items\"][diffItemIndex][\"offer_context\"][\"offer_id\"][\"value\"];\n    offer_context[\"currentPhaseIndex\"] = 0;\n    di[\"offerContext\"] = offer_context;\n    diffItemsContext.push(di);\n  }\n  return diffItemsContext;\n}","line":127}},{"result":{"duration":354833,"status":"passed"},"comments":["# Input to this should be response of private-subscription-context-GET.feature"],"line":149,"name":"def getOrderDiffForDryRunForRecurrence =","match":{"location":"karate","arguments":[]},"keyword":">>> *","doc_string":{"content_type":"","value":"function(subscriptionContextResponse) {\n  var orderDiffs = [];\n  var offerId = subscriptionContextResponse[\"agreements\"][0][\"subscriptions\"][0][\"offer\"][\"id\"]\n  var products = subscriptionContextResponse[\"agreements\"][0][\"subscriptions\"][0][\"products\"]\n  for(const product of products){\n    di = {};\n    di[\"productId\"] = product[\"id\"];\n    di[\"diffAction\"] = \"DIFF_ACTION_RECUR\";\n    di[\"switchAction\"] = \"SWITCH_ACTION_IMMEDIATE\";\n    var offer_context = {};\n    offer_context[\"campaignId\"] = product[\"campaign\"][\"id\"];\n    offer_context[\"phaseId\"] = product[\"phase\"][\"id\"];\n    offer_context[\"offerId\"] = offerId;\n    offer_context[\"currentPhaseIndex\"] = 0;\n    di[\"offerContext\"] = offer_context;\n    orderDiffs.push(di);\n  }\n  return orderDiffs;\n}","line":149}},{"result":{"duration":94708,"status":"passed"},"comments":["# get Date format"],"line":173,"name":"def getISOFormat =","match":{"location":"karate","arguments":[]},"keyword":">>> *","doc_string":{"content_type":"","value":"function(date){\n  const dateObject = new Date(date);\n  return dateObject.toISOString();\n}","line":173}},{"name":"call read('classpath:services\/apm\/retry-now\/retrynow-service.feature')","result":{"duration":17422875,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":137},{"name":"services\/apm\/retry-now\/retrynow-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":137},{"name":"json retryNowService = read('classpath:services\/apm\/retry-now\/retrynow-service.json')","result":{"duration":570333,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":4},{"name":"def retryNowServiceBaseUrl = getBaseUrl(retryNowService)","result":{"duration":588291,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"call read('classpath:services\/bin-service-admin-backend\/bin-service-admin-backend.feature')","result":{"duration":15377667,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":138},{"name":"services\/bin-service-admin-backend\/bin-service-admin-backend.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":138},{"name":"json binServiceAdminBackendJson = read('classpath:services\/bin-service-admin-backend\/bin-service-admin-backend.json');","result":{"duration":509583,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def binServiceAdminBackendBaseUrl = getBaseUrl(binServiceAdminBackendJson)","result":{"duration":423125,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/hiro\/hiro.feature')","result":{"duration":13452916,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":139},{"name":"services\/hiro\/hiro.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":139},{"name":"json hiroService = read('classpath:services\/hiro\/hiro.json');","result":{"duration":437542,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def hiroServiceBaseUrl = getBaseUrl(hiroService)","result":{"duration":312792,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/payment-hulushim\/payment-hulushim.feature')","result":{"duration":14568917,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":140},{"name":"services\/payment-hulushim\/payment-hulushim.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":140},{"name":"json paymentHuluShimJson = read('classpath:services\/payment-hulushim\/payment-hulushim.json');","result":{"duration":462166,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def paymentHuluLinkBaseUrl = getBaseUrl(paymentHuluShimJson)","result":{"duration":422000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def paymentHuluShimBaseUrl = getBaseUrl(paymentHuluShimJson, \"staging-hulushim\")","result":{"duration":511000,"status":"passed"},"match":{"location":"karate","arguments":[]},"comments":["# HuluShim base URL provided below is always set to run in staging environment","# The new endpoint has been developed as part of JIRA Ticket - https:\/\/jira.disneystreaming.com\/browse\/CARDS-14065"],"keyword":">>> *","line":9},{"name":"call read('classpath:services\/canal-migration-service\/canal-service.feature')","result":{"duration":14652209,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":141},{"name":"services\/canal-migration-service\/canal-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":141},{"name":"json canalService = read('classpath:services\/canal-migration-service\/canal-service.json');","result":{"duration":526458,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"def dssMigrationServicesUrl = getBaseUrl(canalService)","result":{"duration":542250,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":7},{"name":"call read('classpath:services\/invoice-revenue-share\/invoice-revenue-share.feature')","result":{"duration":15697417,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":142},{"name":"services\/invoice-revenue-share\/invoice-revenue-share.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":142},{"name":"json revenueShare = read('classpath:services\/invoice-revenue-share\/invoice-revenue-share.json');","result":{"duration":469833,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def revenueShareBaseUrl = getBaseUrl(revenueShare)","result":{"duration":367792,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:services\/unified-bounty-service\/unified-bounty-service.feature')","result":{"duration":14066333,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":143},{"name":"services\/unified-bounty-service\/unified-bounty-service.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>","line":143},{"name":"json unifiedBountyServicesUrl = read('classpath:services\/unified-bounty-service\/unified-bounty-service.json');","result":{"duration":553000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":5},{"name":"def unifiedBountyServicesBaseUrl = getBaseUrl(unifiedBountyServicesUrl)","result":{"duration":370667,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">>> *","line":6},{"name":"call read('classpath:credit-cards.feature')","result":{"duration":17282500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":27},{"name":"credit-cards.feature","result":{"duration":0,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">","line":27},{"name":"def creditCardTrial = new BigInteger('4111111111111111')","result":{"duration":2704792,"status":"passed"},"match":{"location":"karate","arguments":[]},"comments":["#use creditCardTrial for all trial signups","#IMPORTANT: DON'T MIX THIS CARD WITH OTHER CARDS IN TESTS!","#more specifically: successful charges on any card may cause extreme flakiness in trial eligibility scenarios"],"keyword":">> *","line":9},{"name":"def creditCardPaid = new BigInteger('373559598772873')","result":{"duration":268250,"status":"passed"},"match":{"location":"karate","arguments":[]},"comments":["#use creditCardPaid or creditCardTrial for program 600"],"keyword":">> *","line":12},{"name":"def creditCardIneligibleTrial = new BigInteger('373114524873382')","result":{"duration":416042,"status":"passed"},"match":{"location":"karate","arguments":[]},"comments":["#use creditCardIneligibleTrial for testing ineligibility for trial"],"keyword":">> *","line":15},{"name":"def creditCardFailCharge = new BigInteger('4350009533930359')","result":{"duration":246250,"status":"passed"},"match":{"location":"karate","arguments":[]},"comments":["#sale decline"],"keyword":">> *","line":18},{"name":"def creditCardValidExpiry = '2120-12'","result":{"duration":66709,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":20},{"name":"def creditCardInValidExpiry = '2010-12'","result":{"duration":177625,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":">> *","line":21},{"name":"def zipCodeNoTax = 99515","result":{"duration":153416,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":29},{"name":"def zipCodeTax = 98101","result":{"duration":51625,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":30},{"name":"def testEmail =","result":{"duration":79375,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":32,"doc_string":{"content_type":"","value":"function() {\n  return randomEmail('','@huluqa.com');\n}","line":32}},{"name":"def isStaging =","result":{"duration":52250,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":39,"doc_string":{"content_type":"","value":"function() {\n  return env.startsWith('staging');\n}","line":39}},{"name":"def defaultRetryValidation =","result":{"duration":359291,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"> *","line":46,"doc_string":{"content_type":"","value":"function() {\n  var expectedStatus = karate.get('expectedStatus', 200);\n  if(responseStatus != expectedStatus){\n    karate.log(\"Retrying because : \" + expectedStatus + \" != actual ResponseStatus: \" + responseStatus);\n    return false;\n  }\n  return true;\n}","line":46}},{"result":{"duration":86667,"status":"passed"},"comments":["#TODO: add support for emailPrefix, emailDomain, and emailInfix"],"line":59,"name":"def uniqueDssEmailAddress =","match":{"location":"karate","arguments":[]},"keyword":"> *","doc_string":{"content_type":"","value":"function() {\n  var uniqueId = java.util.UUID.randomUUID().toString().replaceAll(\"-\", \"\").substring(0,10);\n  return \"gl-qa-\" + uniqueId + \".\" + projectName + \"@gsuite.disneystreaming.com\";\n}","line":59}},{"name":"match cachedAccounts['dev.premium_au_web'] contains { 'disneyAccount': '#notnull'} }","result":{"duration":186500,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":14},{"name":"match cachedAccounts['dev.premium_de_web'] != null","result":{"duration":124125,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":16},{"name":"match cachedAccounts['dev.premium_de_web'] contains { 'disneyAccount': '#notnull'} }","result":{"duration":52167,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":17}],"tags":[{"name":"@dev","line":5},{"name":"@us-east-1","line":1},{"name":"@nonprod","line":1}]},{"start_timestamp":"2026-01-20T22:55:50.065Z","line":21,"name":"confirm that cache and load accounts works","description":"","id":"confirm-that-cache-and-load-accounts-works","type":"scenario","keyword":"Scenario","steps":[{"result":{"duration":1742833,"status":"passed"},"comments":["# note keys under test must match refresh-and-load-cached-accounts.feature","# when we refresh and load the cache via setup.feature","# then the cache is as expected"],"line":27,"name":"match cachedAccounts['staging.premium_au_web'] != null","match":{"location":"karate","arguments":[]},"keyword":"*","doc_string":{"content_type":"","value":"14:55:50.099 karate.env system property was: null \n14:55:50.108 env: staging-cp3-us-east-1 \n14:55:55.179 this thread waited 5070 milliseconds for callSingle lock: classpath:init-lib.feature\n","line":27}},{"name":"match cachedAccounts['staging.premium_au_web'] contains { 'disneyAccount': '#notnull'} }","result":{"duration":1250875,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":28},{"name":"match cachedAccounts['staging.premium_de_web'] != null","result":{"duration":213916,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":30},{"name":"match cachedAccounts['staging.premium_de_web'] contains { 'disneyAccount': '#notnull' } }","result":{"duration":82000,"status":"passed"},"match":{"location":"karate","arguments":[]},"keyword":"*","line":31}],"tags":[{"name":"@us-east-1","line":1},{"name":"@staging","line":19},{"name":"@nonprod","line":1}]}],"name":"cache-and-load-accounts-test.feature","description":"test cache and load accounts","id":"test-cache-and-load-accounts","keyword":"Feature","uri":"cache-and-load-accounts-test.feature","tags":[{"name":"@nonprod","line":1},{"name":"@us-east-1","line":1}]}]